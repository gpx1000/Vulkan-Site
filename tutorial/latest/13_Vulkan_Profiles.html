<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vulkan Profiles: Simplifying Feature Detection :: Vulkan Documentation Project</title>
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">Vulkan Documentation Project</a>
      <div class="navbar-item">
        <img alt="Vulkan White Label" src="../../_/Vulkan_White_Dec16.svg" height="100%" />
      </div>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <label for="search-input"></label><input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <!-- <a class="navbar-item" href="#">Home</a> -->
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Specs</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="../../spec/latest/chapters/introduction.html">Vulkan 1.3</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Guides</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="../../guide/latest/index.html">Vulkan Guide</a>
          </div>
        </div>
            <!--
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Tools</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">TBD</a>
          </div>
        </div>
            -->
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Tutorial</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="../../tutorial/latest/index.html">Vulkan Tutorial</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Samples</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="../../samples/latest/README.html">Vulkan Samples</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Help</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="https://discord.gg/vulkan">Vulkan Discord</a>
            <a class="navbar-item" href="https://khr.io/khrdiscord">Khronos Discord</a>
          </div>
        </div>
            <!--
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
            -->
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="tutorial" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="00_Introduction.html">Khronos Vulkan Tutorial</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="00_Introduction.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="01_Overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="02_Development_environment.html">Development environment</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="03_Drawing_a_triangle/00_Setup/00_Base_code.html">Drawing a triangle</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="03_Drawing_a_triangle/00_Setup/00_Base_code.html">Setup</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03_Drawing_a_triangle/00_Setup/00_Base_code.html">Base Code</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03_Drawing_a_triangle/00_Setup/01_Instance.html">Instance</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03_Drawing_a_triangle/00_Setup/02_Validation_layers.html">Validation layers</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03_Drawing_a_triangle/00_Setup/03_Physical_devices_and_queue_families.html">Physical devices and queue families</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03_Drawing_a_triangle/00_Setup/04_Logical_device_and_queues.html">Logical device and queues</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="03_Drawing_a_triangle/01_Presentation/00_Window_surface.html">Presentation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03_Drawing_a_triangle/01_Presentation/00_Window_surface.html">Window surface</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03_Drawing_a_triangle/01_Presentation/01_Swap_chain.html">Swap chain</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03_Drawing_a_triangle/01_Presentation/02_Image_views.html">Image views</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="03_Drawing_a_triangle/02_Graphics_pipeline_basics/00_Introduction.html">Graphics pipeline basics</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03_Drawing_a_triangle/02_Graphics_pipeline_basics/00_Introduction.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03_Drawing_a_triangle/02_Graphics_pipeline_basics/01_Shader_modules.html">Shader modules</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03_Drawing_a_triangle/02_Graphics_pipeline_basics/02_Fixed_functions.html">Fixed functions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03_Drawing_a_triangle/02_Graphics_pipeline_basics/03_Render_passes.html">Render passes</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03_Drawing_a_triangle/02_Graphics_pipeline_basics/04_Conclusion.html">Conclusion</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="03_Drawing_a_triangle/03_Drawing/00_Framebuffers.html">Drawing</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03_Drawing_a_triangle/03_Drawing/00_Framebuffers.html">Framebuffers</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03_Drawing_a_triangle/03_Drawing/01_Command_buffers.html">Command buffers</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03_Drawing_a_triangle/03_Drawing/02_Rendering_and_presentation.html">Rendering and presentation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03_Drawing_a_triangle/03_Drawing/03_Frames_in_flight.html">Frames in flight</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03_Drawing_a_triangle/04_Swap_chain_recreation.html">Swap chain recreation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="04_Vertex_buffers/00_Vertex_input_description.html">Vertex buffers</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04_Vertex_buffers/00_Vertex_input_description.html">Vertex input description</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04_Vertex_buffers/01_Vertex_buffer_creation.html">Vertex buffer creation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04_Vertex_buffers/02_Staging_buffer.html">Staging buffer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04_Vertex_buffers/03_Index_buffer.html">Index buffer</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="05_Uniform_buffers/00_Descriptor_set_layout_and_buffer.html">Uniform buffers</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="05_Uniform_buffers/00_Descriptor_set_layout_and_buffer.html">Descriptor layout and buffer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="05_Uniform_buffers/01_Descriptor_pool_and_sets.html">Descriptor pool and sets</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="06_Texture_mapping/00_Images.html">Texture mapping</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="06_Texture_mapping/00_Images.html">Images</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="06_Texture_mapping/01_Image_view_and_sampler.html">Image view and sampler</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="06_Texture_mapping/02_Combined_image_sampler.html">Combined image sampler</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="07_Depth_buffering.html">Depth buffering</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="08_Loading_models.html">Loading models</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="09_Generating_Mipmaps.html">Generating Mipmaps</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="10_Multisampling.html">Multisampling</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="11_Compute_Shader.html">Compute Shader</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="12_Ecosystem_Utilities_and_Compatibility.html">Ecosystem Utilities and GPU Compatibility</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="13_Vulkan_Profiles.html">Vulkan Profiles</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="14_Android.html">Android</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="15_GLTF_KTX2_Migration.html">Migrating to Modern Asset Formats: glTF and KTX2</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="16_Multiple_Objects.html">Rendering Multiple Objects</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="17_Multithreading.html">Multithreading</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="courses/18_Ray_tracing/00_Overview.html">Ray Tracing</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="courses/18_Ray_tracing/00_Overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="courses/18_Ray_tracing/01_Dynamic_rendering.html">Dynamic rendering</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="courses/18_Ray_tracing/02_Acceleration_structures.html">Acceleration structures</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="courses/18_Ray_tracing/03_Ray_query_shadows.html">Ray query shadows</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="courses/18_Ray_tracing/04_TLAS_animation.html">TLAS animation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="courses/18_Ray_tracing/05_Shadow_transparency.html">Shadow transparency</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="courses/18_Ray_tracing/06_Reflections.html">Reflections</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="courses/18_Ray_tracing/07_Conclusion.html">Conclusion</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="90_FAQ.html">FAQ</a>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text"><a href="https://github.com/KhronosGroup/Vulkan-Tutorial" target="_blank" rel="noopener">GitHub Repository</a></span>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Khronos Vulkan Tutorial</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="00_Introduction.html">Khronos Vulkan Tutorial</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="00_Introduction.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../glsl/latest/index.html">OpenGL Shading Language Specification</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../glsl/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../refpages/latest/refpages/index.html">Vulkan API Reference Pages</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../refpages/latest/refpages/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../features/latest/features/index.html">Vulkan Feature Descriptions</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../features/latest/features/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../guide/latest/index.html">Vulkan Guide</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../guide/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../samples/latest/README.html">Vulkan Samples</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../samples/latest/README.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../spec/latest/index.html">Vulkan Specification</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../spec/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../spec/latest/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="00_Introduction.html">Khronos Vulkan Tutorial</a></li>
    <li><a href="13_Vulkan_Profiles.html">Vulkan Profiles</a></li>
  </ul>
</nav>
    <!--
    -->
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Vulkan Profiles: Simplifying Feature Detection</h1>
<div class="sect1">
<h2 id="_introduction"><a class="anchor" href="#_introduction"></a>Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this chapter, we&#8217;ll explore Vulkan profiles, a powerful feature that builds upon the ecosystem utilities we discussed in the previous chapter. Vulkan profiles provide a standardized way to:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Define a set of features, extensions, and limits that your application requires</p>
</li>
<li>
<p>Automatically check for compatibility with the user&#8217;s hardware</p>
</li>
<li>
<p>Eliminate the need for manual feature detection and fallback paths</p>
</li>
<li>
<p>Significantly reduce boilerplate code</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Vulkan profiles are particularly valuable for developers who want to ensure their applications work consistently across a wide range of hardware without the complexity of manually checking for feature support.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_understanding_vulkan_profiles"><a class="anchor" href="#_understanding_vulkan_profiles"></a>Understanding Vulkan Profiles</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_what_are_vulkan_profiles"><a class="anchor" href="#_what_are_vulkan_profiles"></a>What Are Vulkan Profiles?</h3>
<div class="paragraph">
<p>Vulkan profiles are predefined collections of features, extensions, limits, and formats that represent a specific target environment or set of best practices. They provide a higher-level abstraction over the low-level Vulkan API, making it easier to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Target specific hardware capabilities</p>
</li>
<li>
<p>Ensure compatibility across different GPUs</p>
</li>
<li>
<p>Implement best practices consistently</p>
</li>
<li>
<p>Reduce boilerplate code for feature detection</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Instead of manually checking for each feature and extension and implementing fallback paths, you can simply specify a profile that your application requires. The Vulkan profiles library will handle the compatibility checks and provide appropriate error messages if the user&#8217;s hardware doesn&#8217;t meet the requirements.</p>
</div>
</div>
<div class="sect2">
<h3 id="_types_of_vulkan_profiles"><a class="anchor" href="#_types_of_vulkan_profiles"></a>Types of Vulkan Profiles</h3>
<div class="paragraph">
<p>Several types of profiles are available:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>API Profiles</strong>: Represent specific Vulkan API versions (e.g., Vulkan 1.1, 1.2, 1.3)</p>
</li>
<li>
<p><strong>Vendor Profiles</strong>: Target specific hardware vendors (e.g., NVIDIA, AMD, Intel)</p>
</li>
<li>
<p><strong>Platform Profiles</strong>: Target specific platforms (e.g., Windows, Linux, Android)</p>
</li>
<li>
<p><strong>Best Practices Profile</strong>: Implements recommended practices for Vulkan development</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In this chapter, we&#8217;ll use the Best Practices profile as an example,
additionally, we will demonstrate how profiles can simplify your code by
eliminating the need for manual feature detection.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_profiles_simplify_your_code"><a class="anchor" href="#_how_profiles_simplify_your_code"></a>How Profiles Simplify Your Code</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_eliminating_manual_feature_detection"><a class="anchor" href="#_eliminating_manual_feature_detection"></a>Eliminating Manual Feature Detection</h3>
<div class="paragraph">
<p>Up until now, we had to manually check for feature support and implement
fallback paths:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Check if the device supports Vulkan 1.3</p>
</li>
<li>
<p>If not, check if it supports the dynamic rendering extension</p>
</li>
<li>
<p>If neither is supported, fall back to traditional render passes</p>
</li>
<li>
<p>Repeat this process for every feature (timeline semaphores, synchronization2, etc.)</p>
</li>
<li>
<p>Maintain separate code paths for each feature</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This approach leads to complex, hard-to-maintain code with multiple conditional branches.</p>
</div>
<div class="paragraph">
<p>With profiles, this entire process is simplified to:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Check if the profile is supported</p>
</li>
<li>
<p>If supported, use all features guaranteed by the profile</p>
</li>
<li>
<p>If not, optionally fall back to a more basic approach</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_benefits_of_using_profiles"><a class="anchor" href="#_benefits_of_using_profiles"></a>Benefits of Using Profiles</h3>
<div class="paragraph">
<p>Using profiles offers several advantages:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Drastically reduced code complexity</strong>: No need for multiple feature checks and conditional branches</p>
</li>
<li>
<p><strong>Improved maintainability</strong>: Fewer code paths to test and debug</p>
</li>
<li>
<p><strong>Future-proofing</strong>: As new Vulkan versions are released, profiles can be updated without changing your code</p>
</li>
<li>
<p><strong>Clearer requirements</strong>: Profiles provide a clear specification of what your application needs</p>
</li>
<li>
<p><strong>Simplified error handling</strong>: One check instead of many</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementing_profiles_in_your_application"><a class="anchor" href="#_implementing_profiles_in_your_application"></a>Implementing Profiles in Your Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s see how to implement profiles in your Vulkan application. We&#8217;ll use the Best Practices profile as an example to demonstrate how profiles can replace the manual feature detection we had to do in the previous chapter.</p>
</div>
<div class="sect2">
<h3 id="_adding_the_vulkan_profiles_library"><a class="anchor" href="#_adding_the_vulkan_profiles_library"></a>Adding the Vulkan Profiles Library</h3>
<div class="paragraph">
<p>First, you need to include the Vulkan profiles header:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">#include &lt;vulkan/vulkan_profiles.hpp&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This header provides the necessary functions and structures to work with Vulkan profiles.</p>
</div>
<div class="paragraph">
<p>The Vulkan Profiles header is NOT part of the standard Vulkan headers.
It is only available if you use the Vulkan SDK. Make sure you have the Vulkan SDK installed and properly configured in your development environment.</p>
</div>
</div>
<div class="sect2">
<h3 id="_defining_the_profile_requirements"><a class="anchor" href="#_defining_the_profile_requirements"></a>Defining the Profile Requirements</h3>
<div class="paragraph">
<p>Instead of manually checking for features and extensions, you can define your profile requirements:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Define the profile we want to use
const VpProfileProperties profile = {
    VP_KHR_ROADMAP_2022_NAME,
    VP_KHR_ROADMAP_2022_SPEC_VERSION
};

// Check if the profile is supported
VkBool32 supported = false;
vpGetPhysicalDeviceProfileSupport(instance, physicalDevice, &amp;profile, &amp;supported);

if (!supported) {
    throw std::runtime_error("Roadmap 2022 profile is not supported on this device");
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_device_with_the_profile"><a class="anchor" href="#_creating_a_device_with_the_profile"></a>Creating a Device with the Profile</h3>
<div class="paragraph">
<p>When creating a logical device, you can use the profile to automatically enable the required features and extensions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Create device with Best Practices profile
VkDeviceCreateInfo deviceCreateInfo = {};
deviceCreateInfo.sType = VK_STRUCTURE_TYPE_DEVICE_CREATE_INFO;

// Set up queue create infos
// ...

// Apply the Best Practices profile to the device creation
vpCreateDevice(physicalDevice, &amp;deviceCreateInfo, &amp;bestPracticesProfile, nullptr, &amp;device);</code></pre>
</div>
</div>
<div class="paragraph">
<p>This automatically enables all the features and extensions required by the Best Practices profile, without having to manually specify them.</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_profile_specific_features"><a class="anchor" href="#_using_profile_specific_features"></a>Using Profile-Specific Features</h3>
<div class="paragraph">
<p>The Best Practices profile may enable specific features that you can use in your application:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// The profile guarantees these features are available
// No need to check for support or provide fallback paths

// Example: Using dynamic rendering (guaranteed by the profile)
vk::RenderingAttachmentInfo colorAttachment{
    .imageView = swapChainImageViews[imageIndex],
    .imageLayout = vk::ImageLayout::eAttachmentOptimal,
    .loadOp = vk::AttachmentLoadOp::eClear,
    .storeOp = vk::AttachmentStoreOp::eStore,
    .clearValue = clearColor
};

vk::RenderingInfo renderingInfo{
    .renderArea = {{0, 0}, swapChainExtent},
    .layerCount = 1,
    .colorAttachmentCount = 1,
    .pColorAttachments = &amp;colorAttachment
};

commandBuffer.beginRendering(renderingInfo);
// ... draw commands ...
commandBuffer.endRendering();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_error_handling_with_profiles"><a class="anchor" href="#_error_handling_with_profiles"></a>Error Handling with Profiles</h3>
<div class="paragraph">
<p>When using profiles, error handling becomes more straightforward:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">try {
    // Try to create a device with the Best Practices profile
    vpCreateDevice(physicalDevice, &amp;deviceCreateInfo, &amp;bestPracticesProfile, nullptr, &amp;device);
} catch (const std::exception&amp; e) {
    // Profile is not supported, provide user-friendly error message
    std::cerr &lt;&lt; "Your GPU does not support the required Vulkan features for optimal performance." &lt;&lt; std::endl;
    std::cerr &lt;&lt; "Error: " &lt;&lt; e.what() &lt;&lt; std::endl;

    // Optionally, try with a more basic profile or exit gracefully
    // ...
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comparing_manual_feature_detection_vs_profiles"><a class="anchor" href="#_comparing_manual_feature_detection_vs_profiles"></a>Comparing Manual Feature Detection vs. Profiles</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s compare the two approaches to understand just how much code and complexity profiles can eliminate:</p>
</div>
<div class="sect2">
<h3 id="_manual_feature_detection_previous_chapter"><a class="anchor" href="#_manual_feature_detection_previous_chapter"></a>Manual Feature Detection (Previous Chapter)</h3>
<div class="paragraph">
<p>In the previous chapter, we had to write code like this for <strong>each feature</strong> we wanted to use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Check if dynamic rendering is supported
bool dynamicRenderingSupported = false;

// Check for Vulkan 1.3 support
if (deviceProperties.apiVersion &gt;= VK_VERSION_1_3) {
    dynamicRenderingSupported = true;
} else {
    // Check for the extension on older Vulkan versions
    for (const auto&amp; extension : availableExtensions) {
        if (strcmp(extension.extensionName, VK_KHR_DYNAMIC_RENDERING_EXTENSION_NAME) == 0) {
            dynamicRenderingSupported = true;
            break;
        }
    }
}

// Store this information for later use
appInfo.dynamicRenderingSupported = dynamicRenderingSupported;</code></pre>
</div>
</div>
<div class="paragraph">
<p>And then we had to create conditional code paths throughout our application:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// When creating the pipeline
if (appInfo.dynamicRenderingSupported) {
    // Use dynamic rendering
    vk::PipelineRenderingCreateInfo renderingInfo{
        .colorAttachmentCount = 1,
        .pColorAttachmentFormats = &amp;swapChainImageFormat
    };
    pipelineInfo.pNext = &amp;renderingInfo;
    pipelineInfo.renderPass = nullptr;
} else {
    // Use traditional render pass
    pipelineInfo.pNext = nullptr;
    pipelineInfo.renderPass = renderPass;
    pipelineInfo.subpass = 0;
}

// When recording command buffers
if (appInfo.dynamicRenderingSupported) {
    // Begin dynamic rendering
    vk::RenderingAttachmentInfo colorAttachment{/*...*/};
    vk::RenderingInfo renderingInfo{/*...*/};
    commandBuffer.beginRendering(renderingInfo);
} else {
    // Begin traditional render pass
    vk::RenderPassBeginInfo renderPassInfo{/*...*/};
    commandBuffer.beginRenderPass(renderPassInfo, vk::SubpassContents::eInline);
}

// And again at the end of the command buffer
if (appInfo.dynamicRenderingSupported) {
    commandBuffer.endRendering();
} else {
    commandBuffer.endRenderPass();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We had to repeat this pattern for <strong>every feature</strong> we wanted to use conditionally (timeline semaphores, synchronization2, etc.), resulting in complex, branching code that&#8217;s challenging to maintain.</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_profiles_this_chapter"><a class="anchor" href="#_using_profiles_this_chapter"></a>Using Profiles (This Chapter)</h3>
<div class="paragraph">
<p>With profiles, all of that complexity is reduced to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Define the profile
const VpProfileProperties profile = {
    VP_KHR_ROADMAP_2022_NAME,
    VP_KHR_ROADMAP_2022_SPEC_VERSION
};

// Check if the profile is supported
VkBool32 supported = false;
vpGetPhysicalDeviceProfileSupport(instance, physicalDevice, &amp;profile, &amp;supported);

if (supported) {
    // Create device with the profile - all features enabled automatically
    vpCreateDevice(physicalDevice, &amp;deviceCreateInfo, &amp;profile, nullptr, &amp;device);

    // Now we can use any feature guaranteed by the profile without checks
    // For example, dynamic rendering is always available:
    vk::RenderingAttachmentInfo colorAttachment{/*...*/};
    vk::RenderingInfo renderingInfo{/*...*/};
    commandBuffer.beginRendering(renderingInfo);
    // ... draw commands ...
    commandBuffer.endRendering();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The profile approach eliminates:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Multiple feature detection checks</p>
</li>
<li>
<p>Conditional code paths throughout your application</p>
</li>
<li>
<p>The need to track feature support in your application state</p>
</li>
<li>
<p>The complexity of maintaining and testing multiple code paths</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This results in code that is:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Significantly shorter</p>
</li>
<li>
<p>Easier to read and understand</p>
</li>
<li>
<p>Less prone to errors</p>
</li>
<li>
<p>Easier to maintain and update</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_best_practices_for_using_profiles"><a class="anchor" href="#_best_practices_for_using_profiles"></a>Best Practices for Using Profiles</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When using Vulkan profiles, consider these best practices:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Choose the right profile</strong>: Select a profile that matches your application&#8217;s requirements without being overly restrictive.</p>
</li>
<li>
<p><strong>Provide fallback options</strong>: If the Best Practices profile isn&#8217;t supported, consider falling back to a more basic profile.</p>
</li>
<li>
<p><strong>Communicate requirements clearly</strong>: Inform users about the hardware requirements based on the profiles you support.</p>
</li>
<li>
<p><strong>Test on various hardware</strong>: Even with profiles, it&#8217;s important to test your application on different GPUs.</p>
</li>
<li>
<p><strong>Stay updated</strong>: Profiles evolve with new Vulkan versions, so keep your implementation up to date.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclusion"><a class="anchor" href="#_conclusion"></a>Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Vulkan profiles provide a powerful way to simplify your Vulkan code by eliminating the need for manual feature detection and conditional code paths. As we&#8217;ve seen in this chapter, profiles can dramatically reduce the amount of code you need to write and maintain, making your application:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>More concise and readable</p>
</li>
<li>
<p>Easier to maintain and update</p>
</li>
<li>
<p>Less prone to errors</p>
</li>
<li>
<p>More consistent across different hardware</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The example we&#8217;ve explored in this chapter demonstrates how profiles can replace the complex feature detection and fallback paths we had to implement in the previous chapter. By using profiles, you can focus more on your application&#8217;s core functionality and less on the intricacies of hardware compatibility.</p>
</div>
<div class="paragraph">
<p><a href="_attachments/33_vulkan_profiles.cpp">C&#43;&#43; code</a></p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
    <!--
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
    -->
</footer>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script src="../../_/js/vendor/lunr.js" defer></script>
<script src="https://cdn.jsdelivr.net/pako/1.0.3/pako.min.js" defer></script>
<script src="../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../.." data-snippet-length="100" data-stylesheet="../../_/css/search.css" defer></script>
<script>
window.addEventListener('DOMContentLoaded', function(){
  try {
    var script = document.getElementById('search-ui-script');
    var siteRoot = (script && script.getAttribute('data-site-root-path')) || '';
    var manifestUrl = siteRoot + '/search-index/manifest.json';
    fetch(manifestUrl)
      .then(function (r) { return r.ok ? r.json() : Promise.reject(new Error('manifest not found')) })
      .then(function (manifest) { antoraSearch.bootstrap(lunr, manifest, siteRoot); })
      .catch(function () {
        var s = document.createElement('script');
        s.async = true;
        s.src = siteRoot + '/search-index.js';
        document.head.appendChild(s);
      });
  } catch (e) {
    // Fallback to monolithic index if anything goes wrong
    var s = document.createElement('script');
    s.async = true;
    s.src = '../../search-index.js';
    document.head.appendChild(s);
  }
});
</script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Engine Architecture: Event Systems :: Vulkan Documentation Project</title>
    <meta name="generator" content="Antora 3.1.10">
    <script>
      !function (theme) {
        if (theme === 'dark') document.documentElement.classList.add('dark')
        else document.documentElement.classList.add('light')
      }(localStorage && localStorage.getItem('theme') || (matchMedia('(prefers-color-scheme: dark)')?.matches && 'dark'))
    </script>
    <link rel="stylesheet" href="../../../../_/css/site.css">
    <link rel="stylesheet" href="../../../../_/css/vendor/tabs.css">
    <link rel="apple-touch-icon" sizes="180x180" href="../../../../_/img/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../../_/img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../../_/img/favicon-16x16.png">
    <link rel="manifest" href="../../../../_/site.webmanifest">
    <link rel="mask-icon" href="../../../../_/img/safari-pinned-tab.svg" color="#a41e22">
    <meta name="msapplication-TileColor" content="#ffc40d">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../../.."><img class="navbar-item" alt="Vulkan White Label" src="../../../../_/Vulkan_Docs.svg" /></a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field has-filter">
          <label for="search-input"></label>
          <input id="search-input" type="text" placeholder="Search the docs">
          <label class="filter checkbox">
            <input type="checkbox" data-facet-filter="component:tutorial" checked> In this component
          </label>
        </div>
      </div>
      <button class="navbar-burger" aria-controls="topbar-nav" aria-expanded="false" aria-label="Toggle main menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <!-- <a class="navbar-item" href="#">Home</a> -->
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Specs</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="../../../../spec/latest/chapters/introduction.html">Vulkan API</a>
            <a class="navbar-item" href="../../../../glsl/latest/index.html">GLSL</a>
            <a class="navbar-item" href="../../../../guide/latest/hlsl.html">HLSL</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Education</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="../../../../refpages/latest/refpages/index.html">Vulkan Reference Pages</a>
            <a class="navbar-item" href="../../../../features/latest/features/index.html">Vulkan Feature Descriptions</a>
            <a class="navbar-item" href="../../../../guide/latest/index.html">Vulkan Guide</a>
            <a class="navbar-item" href="../../../../samples/latest/README.html">Vulkan Samples</a>
            <a class="navbar-item" href="../../../../tutorial/latest/index.html">Vulkan Tutorial</a>
            <a class="navbar-item" href="https://www.youtube.com/c/vulkan">YouTube</a>
            <a class="navbar-item" href="https://vulkan.org">More Info at Vulkan.org</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Feedback</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="https://github.com/KhronosGroup/Vulkan-Site/issues/new/choose" target="_blank">Report a Problem</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Community</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="https://discord.gg/vulkan">Vulkan Discord</a>
            <a class="navbar-item" href="https://reddit.com/r/vulkan">Reddit</a>
            <a class="navbar-item" href="https://stackoverflow.com/questions/tagged/vulkan">Stack Overflow</a>
            <a class="navbar-item" href="https://fosstodon.org/@vulkan">Mastodon</a>
          </div>
        </div>
      </div>
    </div>
    <label class="theme-toggler">
      <input type="checkbox" id="switch-theme-checkbox" name="switch-theme-checkbox"/>
      <span class="icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="moon" class="svg-inline--fa fa-moon moon" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"></path>
        </svg>
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="sun" class="svg-inline--fa fa-sun sun" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z"></path>
        </svg></span>
    </label>
  </nav>
</header>
<script>
  window.onload = function() {
    let e = document.getElementById("switch-theme-checkbox")
    e.checked = document.documentElement.classList.contains("dark");
    e.checked ? e.parentElement.classList.add("active") : e.parentElement.classList.remove("active")
  }
  !function() {
    let e = document.getElementById("switch-theme-checkbox")
    e.checked = document.documentElement.classList.contains("dark")
    e.addEventListener("change", function() {
      if (document.documentElement.classList.contains("light")) {
        document.documentElement.classList.remove("light")
        document.documentElement.classList.add("dark")
      } else if (document.documentElement.classList.contains("dark")) {
        document.documentElement.classList.remove("dark")
        document.documentElement.classList.add("light")
      } else {
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
          document.documentElement.classList.add("dark")
        } else {
          document.documentElement.classList.add("light")
        }
      }
      document.documentElement.setAttribute("data-theme", this.checked ? "dark" : "light"),
        function(e) {
          window.localStorage && window.localStorage.setItem("theme", e)
        }(this.checked ? "dark" : "light"), this.checked ? this.parentElement.classList.add("active") : this.parentElement.classList.remove("active")
    }.bind(e))
  }();
</script>
<div class="body">
<div class="nav-container" data-component="tutorial" data-version="latest" id="split-0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="../../00_Introduction.html">Khronos Vulkan Tutorial</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../00_Introduction.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../01_Overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../02_Development_environment.html">Development environment</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../03_Drawing_a_triangle/00_Setup/00_Base_code.html">Drawing a triangle</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../03_Drawing_a_triangle/00_Setup/00_Base_code.html">Setup</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../03_Drawing_a_triangle/00_Setup/00_Base_code.html">Base Code</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../03_Drawing_a_triangle/00_Setup/01_Instance.html">Instance</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../03_Drawing_a_triangle/00_Setup/02_Validation_layers.html">Validation layers</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../03_Drawing_a_triangle/00_Setup/03_Physical_devices_and_queue_families.html">Physical devices and queue families</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../03_Drawing_a_triangle/00_Setup/04_Logical_device_and_queues.html">Logical device and queues</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../03_Drawing_a_triangle/01_Presentation/00_Window_surface.html">Presentation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../03_Drawing_a_triangle/01_Presentation/00_Window_surface.html">Window surface</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../03_Drawing_a_triangle/01_Presentation/01_Swap_chain.html">Swap chain</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../03_Drawing_a_triangle/01_Presentation/02_Image_views.html">Image views</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../03_Drawing_a_triangle/02_Graphics_pipeline_basics/00_Introduction.html">Graphics pipeline basics</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../03_Drawing_a_triangle/02_Graphics_pipeline_basics/00_Introduction.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../03_Drawing_a_triangle/02_Graphics_pipeline_basics/01_Shader_modules.html">Shader modules</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../03_Drawing_a_triangle/02_Graphics_pipeline_basics/02_Fixed_functions.html">Fixed functions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../03_Drawing_a_triangle/02_Graphics_pipeline_basics/03_Render_passes.html">Render passes</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../03_Drawing_a_triangle/02_Graphics_pipeline_basics/04_Conclusion.html">Conclusion</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../03_Drawing_a_triangle/03_Drawing/00_Framebuffers.html">Drawing</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../03_Drawing_a_triangle/03_Drawing/00_Framebuffers.html">Framebuffers</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../03_Drawing_a_triangle/03_Drawing/01_Command_buffers.html">Command buffers</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../03_Drawing_a_triangle/03_Drawing/02_Rendering_and_presentation.html">Rendering and presentation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../03_Drawing_a_triangle/03_Drawing/03_Frames_in_flight.html">Frames in flight</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../03_Drawing_a_triangle/04_Swap_chain_recreation.html">Swap chain recreation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../04_Vertex_buffers/00_Vertex_input_description.html">Vertex buffers</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../04_Vertex_buffers/00_Vertex_input_description.html">Vertex input description</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../04_Vertex_buffers/01_Vertex_buffer_creation.html">Vertex buffer creation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../04_Vertex_buffers/02_Staging_buffer.html">Staging buffer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../04_Vertex_buffers/03_Index_buffer.html">Index buffer</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../05_Uniform_buffers/00_Descriptor_set_layout_and_buffer.html">Uniform buffers</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../05_Uniform_buffers/00_Descriptor_set_layout_and_buffer.html">Descriptor layout and buffer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../05_Uniform_buffers/01_Descriptor_pool_and_sets.html">Descriptor pool and sets</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../06_Texture_mapping/00_Images.html">Texture mapping</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../06_Texture_mapping/00_Images.html">Images</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../06_Texture_mapping/01_Image_view_and_sampler.html">Image view and sampler</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../06_Texture_mapping/02_Combined_image_sampler.html">Combined image sampler</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../07_Depth_buffering.html">Depth buffering</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../08_Loading_models.html">Loading models</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../09_Generating_Mipmaps.html">Generating Mipmaps</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../10_Multisampling.html">Multisampling</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../11_Compute_Shader.html">Compute Shader</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../12_Ecosystem_Utilities_and_Compatibility.html">Ecosystem Utilities and GPU Compatibility</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../13_Vulkan_Profiles.html">Vulkan Profiles</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../14_Android.html">Android</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../15_GLTF_KTX2_Migration.html">Migrating to Modern Asset Formats: glTF and KTX2</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../16_Multiple_Objects.html">Rendering Multiple Objects</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../17_Multithreading.html">Multithreading</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../courses/18_Ray_tracing/00_Overview.html">Ray Tracing</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../courses/18_Ray_tracing/00_Overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../courses/18_Ray_tracing/01_Dynamic_rendering.html">Dynamic rendering</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../courses/18_Ray_tracing/02_Acceleration_structures.html">Acceleration structures</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../courses/18_Ray_tracing/03_Ray_query_shadows.html">Ray query shadows</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../courses/18_Ray_tracing/04_TLAS_animation.html">TLAS animation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../courses/18_Ray_tracing/05_Shadow_transparency.html">Shadow transparency</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../courses/18_Ray_tracing/06_Reflections.html">Reflections</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../courses/18_Ray_tracing/07_Conclusion.html">Conclusion</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../90_FAQ.html">FAQ</a>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text"><a href="https://github.com/KhronosGroup/Vulkan-Tutorial" target="_blank" rel="noopener">GitHub Repository</a></span>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Khronos Vulkan Tutorial</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <div class="title"><a href="../../00_Introduction.html">Khronos Vulkan Tutorial</a></div>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../00_Introduction.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../../glsl/latest/index.html">OpenGL Shading Language Specification</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../glsl/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../../refpages/latest/refpages/index.html">Vulkan API Reference Pages</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../refpages/latest/refpages/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../../features/latest/features/index.html">Vulkan Feature Descriptions</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../features/latest/features/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../../guide/latest/index.html">Vulkan Guide</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../guide/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../../samples/latest/README.html">Vulkan Samples</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../samples/latest/README.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../../spec/latest/index.html">Vulkan Specification</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../spec/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article" id="split-1">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../spec/latest/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../00_Introduction.html">Khronos Vulkan Tutorial</a></li>
    <li><a href="06_event_systems.html">Engine Architecture: Event Systems</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Engine Architecture: Event Systems</h1>
<div class="sect1">
<h2 id="_event_systems"><a class="anchor" href="#_event_systems"></a>Event Systems</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Event systems provide a flexible way for different parts of your engine to communicate with each other without creating tight coupling. In this section, we&#8217;ll explore how to design and implement an effective event system for your rendering engine.</p>
</div>
<div class="sect2">
<h3 id="_the_need_for_event_systems"><a class="anchor" href="#_the_need_for_event_systems"></a>The Need for Event Systems</h3>
<div class="paragraph">
<p>Even in the simple engine we&#8217;re building, subsystems need to communicate with each other efficiently. As our engine grows, these communication needs become increasingly important:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Physics</strong> needs to notify <strong>Audio</strong> when collisions occur.</p>
</li>
<li>
<p><strong>Input</strong> needs to notify <strong>Game Logic</strong> when buttons are pressed.</p>
</li>
<li>
<p><strong>Game Logic</strong> needs to notify <strong>Rendering</strong> when objects change.</p>
</li>
<li>
<p><strong>Resource Management</strong> needs to notify <strong>Rendering</strong> when assets are loaded.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Without an event system, these interactions would require direct references between subsystems, creating tight coupling and making the code harder to maintain and extend.</p>
</div>
</div>
<div class="sect2">
<h3 id="_event_system_design_principles"><a class="anchor" href="#_event_system_design_principles"></a>Event System Design Principles</h3>
<div class="paragraph">
<p>When designing an event system, consider these principles:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Decoupling</strong> - Minimize dependencies between event producers and consumers.</p>
</li>
<li>
<p><strong>Type Safety</strong> - Use the type system to prevent errors.</p>
</li>
<li>
<p><strong>Performance</strong> - Efficiently dispatch events, especially for high-frequency events.</p>
</li>
<li>
<p><strong>Flexibility</strong> - Support different event delivery patterns (immediate, queued, etc.).</p>
</li>
<li>
<p><strong>Debugging</strong> - Make it easy to debug event flow.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_basic_event_system_implementation"><a class="anchor" href="#_basic_event_system_implementation"></a>Basic Event System Implementation</h3>
<div class="paragraph">
<p>Let&#8217;s implement a basic event system:</p>
</div>
<div class="sect3">
<h4 id="_base_event_type_and_convenience_macro"><a class="anchor" href="#_base_event_type_and_convenience_macro"></a>Base event type and convenience macro</h4>
<div class="paragraph">
<p>We start with a minimal base event interface and a helper macro to define strongly typed events without boilerplate.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cpp hljs" data-lang="cpp">// Base event class
class Event {
public:
    virtual ~Event() = default;

    // Get the type of the event
    virtual const char* GetType() const = 0;

    // Clone the event (for queued events)
    virtual Event* Clone() const = 0;
};

// Macro to help define event types
#define DEFINE_EVENT_TYPE(type) \
    static const char* GetStaticType() { return #type; } \
    virtual const char* GetType() const override { return GetStaticType(); } \
    virtual Event* Clone() const override { return new type(*this); }</code></pre>
</div>
</div>
<div class="paragraph">
<p>This lets us identify and copy events generically while keeping concrete event classes small.</p>
</div>
</div>
<div class="sect3">
<h4 id="_concrete_event_types"><a class="anchor" href="#_concrete_event_types"></a>Concrete event types</h4>
<div class="paragraph">
<p>Keep event payloads focused and lightweight; they should represent facts, not behavior.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cpp hljs" data-lang="cpp">// Example event types
class WindowResizeEvent : public Event {
private:
    int width;
    int height;

public:
    WindowResizeEvent(int w, int h) : width(w), height(h) {}

    int GetWidth() const { return width; }
    int GetHeight() const { return height; }

    DEFINE_EVENT_TYPE(WindowResizeEvent)
};

class KeyPressEvent : public Event {
private:
    int keyCode;
    bool repeat;

public:
    KeyPressEvent(int key, bool isRepeat) : keyCode(key), repeat(isRepeat) {}

    int GetKeyCode() const { return keyCode; }
    bool IsRepeat() const { return repeat; }

    DEFINE_EVENT_TYPE(KeyPressEvent)
};</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_listener_and_type_safe_dispatcher"><a class="anchor" href="#_listener_and_type_safe_dispatcher"></a>Listener and type-safe dispatcher</h4>
<div class="paragraph">
<p>Listeners receive events; the dispatcher routes a generic Event to a typed handler when types match.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cpp hljs" data-lang="cpp">// Event listener interface
class EventListener {
public:
    virtual ~EventListener() = default;
    virtual void OnEvent(const Event&amp; event) = 0;
};

// Event dispatcher
class EventDispatcher {
private:
    const Event&amp; event;

public:
    explicit EventDispatcher(const Event&amp; e) : event(e) {}

    // Dispatch event to handler if types match
    template&lt;typename T, typename F&gt;
    bool Dispatch(const F&amp; handler) {
        if (event.GetType() == T::GetStaticType()) {
            handler(static_cast&lt;const T&amp;&gt;(event));
            return true;
        }
        return false;
    }
};</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_event_bus_immediate_vs_queued"><a class="anchor" href="#_event_bus_immediate_vs_queued"></a>Event bus (immediate vs. queued)</h4>
<div class="paragraph">
<p>The bus can deliver immediately (low latency) or queue for later (deterministic ordering across frames).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cpp hljs" data-lang="cpp">// Event bus
class EventBus {
private:
    std::vector&lt;EventListener*&gt; listeners;
    std::queue&lt;std::unique_ptr&lt;Event&gt;&gt; eventQueue;
    std::mutex queueMutex;
    bool immediateMode = true;

public:
    void SetImmediateMode(bool immediate) {
        immediateMode = immediate;
    }

    void AddListener(EventListener* listener) {
        listeners.push_back(listener);
    }

    void RemoveListener(EventListener* listener) {
        auto it = std::find(listeners.begin(), listeners.end(), listener);
        if (it != listeners.end()) {
            listeners.erase(it);
        }
    }

    void PublishEvent(const Event&amp; event) {
        if (immediateMode) {
            // Dispatch event immediately
            for (auto listener : listeners) {
                listener-&gt;OnEvent(event);
            }
        } else {
            // Queue event for later processing
            std::lock_guard&lt;std::mutex&gt; lock(queueMutex);
            eventQueue.push(std::unique_ptr&lt;Event&gt;(event.Clone()));
        }
    }

    void ProcessEvents() {
        if (immediateMode) return;

        std::queue&lt;std::unique_ptr&lt;Event&gt;&gt; currentEvents;

        {
            std::lock_guard&lt;std::mutex&gt; lock(queueMutex);
            std::swap(currentEvents, eventQueue);
        }

        while (!currentEvents.empty()) {
            auto&amp; event = *currentEvents.front();

            for (auto listener : listeners) {
                listener-&gt;OnEvent(event);
            }

            currentEvents.pop();
        }
    }
};</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_using_the_event_system"><a class="anchor" href="#_using_the_event_system"></a>Using the Event System</h3>
<div class="paragraph">
<p>Here&#8217;s how you might use the event system in your application:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cpp hljs" data-lang="cpp">// Component that listens for events
class CameraController : public Component, public EventListener {
private:
    CameraComponent* camera;
    float moveSpeed = 5.0f;
    float rotateSpeed = 0.1f;

    bool moveForward = false;
    bool moveBackward = false;
    bool moveLeft = false;
    bool moveRight = false;

public:
    void Initialize() override {
        camera = GetOwner()-&gt;GetComponent&lt;CameraComponent&gt;();

        // Register as event listener
        GetEventBus().AddListener(this);
    }

    void Update(float deltaTime) override {
        if (!camera) return;

        // Handle movement
        glm::vec3 movement(0.0f);

        if (moveForward) movement.z -= 1.0f;
        if (moveBackward) movement.z += 1.0f;
        if (moveLeft) movement.x -= 1.0f;
        if (moveRight) movement.x += 1.0f;

        if (glm::length(movement) &gt; 0.0f) {
            movement = glm::normalize(movement) * moveSpeed * deltaTime;

            auto transform = GetOwner()-&gt;GetComponent&lt;TransformComponent&gt;();
            if (transform) {
                glm::vec3 position = transform-&gt;GetPosition();
                position += movement;
                transform-&gt;SetPosition(position);
            }
        }
    }

    void OnEvent(const Event&amp; event) override {
        EventDispatcher dispatcher(event);

        // Handle key press events
        dispatcher.Dispatch&lt;KeyPressEvent&gt;([this](const KeyPressEvent&amp; e) {
            switch (e.GetKeyCode()) {
                case KEY_W: moveForward = true; break;
                case KEY_S: moveBackward = true; break;
                case KEY_A: moveLeft = true; break;
                case KEY_D: moveRight = true; break;
            }
            return false;
        });

        // Handle key release events
        dispatcher.Dispatch&lt;KeyReleaseEvent&gt;([this](const KeyReleaseEvent&amp; e) {
            switch (e.GetKeyCode()) {
                case KEY_W: moveForward = false; break;
                case KEY_S: moveBackward = false; break;
                case KEY_A: moveLeft = false; break;
                case KEY_D: moveRight = false; break;
            }
            return false;
        });

        // Handle window resize events
        dispatcher.Dispatch&lt;WindowResizeEvent&gt;([this](const WindowResizeEvent&amp; e) {
            if (camera) {
                float aspectRatio = static_cast&lt;float&gt;(e.GetWidth()) / static_cast&lt;float&gt;(e.GetHeight());
                camera-&gt;SetAspectRatio(aspectRatio);
            }
            return false;
        });
    }

    ~CameraController() override {
        // Unregister as event listener
        GetEventBus().RemoveListener(this);
    }

private:
    EventBus&amp; GetEventBus() {
        // Get event bus from somewhere (e.g., singleton or parameter)
        static EventBus eventBus;
        return eventBus;
    }
};

// Input system that generates events
class InputSystem {
private:
    EventBus&amp; eventBus;

    // Key states
    std::unordered_map&lt;int, bool&gt; keyStates;

public:
    explicit InputSystem(EventBus&amp; bus) : eventBus(bus) {}

    void Update() {
        // Poll input events from the platform
        // ...

        // Example: Process a key press
        ProcessKeyPress(KEY_W, false);
    }

    void ProcessKeyPress(int keyCode, bool repeat) {
        bool&amp; keyState = keyStates[keyCode];

        if (!keyState || repeat) {
            // Key was not pressed before or this is a repeat
            KeyPressEvent event(keyCode, repeat);
            eventBus.PublishEvent(event);
        }

        keyState = true;
    }

    void ProcessKeyRelease(int keyCode) {
        bool&amp; keyState = keyStates[keyCode];

        if (keyState) {
            // Key was pressed before
            KeyReleaseEvent event(keyCode);
            eventBus.PublishEvent(event);
        }

        keyState = false;
    }
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_advanced_event_system_features"><a class="anchor" href="#_advanced_event_system_features"></a>Advanced Event System Features</h3>
<div class="sect3">
<h4 id="_event_categories"><a class="anchor" href="#_event_categories"></a>Event Categories</h4>
<div class="paragraph">
<p>Events can be categorized to allow listeners to filter which types of events they receive:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cpp hljs" data-lang="cpp">// Event categories
enum class EventCategory {
    None = 0,
    Application = 1 &lt;&lt; 0,
    Input = 1 &lt;&lt; 1,
    Keyboard = 1 &lt;&lt; 2,
    Mouse = 1 &lt;&lt; 3,
    MouseButton = 1 &lt;&lt; 4,
    Window = 1 &lt;&lt; 5
};

// Enhanced event base class
class Event {
public:
    virtual ~Event() = default;

    virtual const char* GetType() const = 0;
    virtual Event* Clone() const = 0;

    // Get the categories this event belongs to
    virtual int GetCategoryFlags() const = 0;

    // Check if event is in category
    bool IsInCategory(EventCategory category) const {
        return GetCategoryFlags() &amp; static_cast&lt;int&gt;(category);
    }
};

// Enhanced macro to define event types with categories
#define DEFINE_EVENT_TYPE_CATEGORY(type, categoryFlags) \
    static const char* GetStaticType() { return #type; } \
    virtual const char* GetType() const override { return GetStaticType(); } \
    virtual Event* Clone() const override { return new type(*this); } \
    virtual int GetCategoryFlags() const override { return categoryFlags; }

// Example event with categories
class KeyPressEvent : public Event {
private:
    int keyCode;
    bool repeat;

public:
    KeyPressEvent(int key, bool isRepeat) : keyCode(key), repeat(isRepeat) {}

    int GetKeyCode() const { return keyCode; }
    bool IsRepeat() const { return repeat; }

    DEFINE_EVENT_TYPE_CATEGORY(KeyPressEvent,
                              static_cast&lt;int&gt;(EventCategory::Input) |
                              static_cast&lt;int&gt;(EventCategory::Keyboard))
};</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_event_filtering"><a class="anchor" href="#_event_filtering"></a>Event Filtering</h4>
<div class="paragraph">
<p>Listeners can filter events based on categories:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cpp hljs" data-lang="cpp">// Enhanced event bus with filtering
class EventBus {
private:
    struct ListenerInfo {
        EventListener* listener;
        int categoryFilter;
    };

    std::vector&lt;ListenerInfo&gt; listeners;
    std::queue&lt;std::unique_ptr&lt;Event&gt;&gt; eventQueue;
    std::mutex queueMutex;
    bool immediateMode = true;

public:
    void AddListener(EventListener* listener, int categoryFilter = -1) {
        listeners.push_back({listener, categoryFilter});
    }

    void RemoveListener(EventListener* listener) {
        auto it = std::find_if(listeners.begin(), listeners.end(),
                              [listener](const ListenerInfo&amp; info) {
                                  return info.listener == listener;
                              });
        if (it != listeners.end()) {
            listeners.erase(it);
        }
    }

    void PublishEvent(const Event&amp; event) {
        if (immediateMode) {
            // Dispatch event immediately
            for (const auto&amp; info : listeners) {
                if (info.categoryFilter == -1 || (event.GetCategoryFlags() &amp; info.categoryFilter)) {
                    info.listener-&gt;OnEvent(event);
                }
            }
        } else {
            // Queue event for later processing
            std::lock_guard&lt;std::mutex&gt; lock(queueMutex);
            eventQueue.push(std::unique_ptr&lt;Event&gt;(event.Clone()));
        }
    }

    // Rest of the implementation...
};</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_event_priorities"><a class="anchor" href="#_event_priorities"></a>Event Priorities</h4>
<div class="paragraph">
<p>Some events may need to be processed before others:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cpp hljs" data-lang="cpp">// Enhanced event bus with priorities
class EventBus {
private:
    struct ListenerInfo {
        EventListener* listener;
        int categoryFilter;
        int priority;
    };

    std::vector&lt;ListenerInfo&gt; listeners;
    // Rest of the implementation...

public:
    void AddListener(EventListener* listener, int categoryFilter = -1, int priority = 0) {
        listeners.push_back({listener, categoryFilter, priority});

        // Sort listeners by priority (higher priority first)
        std::sort(listeners.begin(), listeners.end(),
                 [](const ListenerInfo&amp; a, const ListenerInfo&amp; b) {
                     return a.priority &gt; b.priority;
                 });
    }

    // Rest of the implementation...
};</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_event_bubbling_and_capturing"><a class="anchor" href="#_event_bubbling_and_capturing"></a>Event Bubbling and Capturing</h4>
<div class="paragraph">
<p>In hierarchical systems like UI, events can propagate through the hierarchy in two ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Event Bubbling</strong> - The event starts at the target element and "bubbles up" through parent elements in the hierarchy. For example, a click event on a button first triggers on the button, then on its container, and continues up to the root element.</p>
</li>
<li>
<p><strong>Event Capturing</strong> - The event starts at the root element and travels down the hierarchy to the target element (the opposite direction of bubbling).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This approach allows parent elements to intercept and handle events triggered on their children, while also giving children the ability to stop propagation if needed. For hierarchical systems like UI, this provides a flexible way to handle events at the appropriate level:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cpp hljs" data-lang="cpp">// UI event with bubbling
class UIEvent : public Event {
private:
    UIElement* target;
    bool bubbles;
    bool cancelBubble = false;

public:
    UIEvent(UIElement* targetElement, bool bubbling = true)
        : target(targetElement), bubbles(bubbling) {}

    UIElement* GetTarget() const { return target; }
    bool Bubbles() const { return bubbles; }

    void StopPropagation() {
        cancelBubble = true;
    }

    bool IsPropagationStopped() const {
        return cancelBubble;
    }

    DEFINE_EVENT_TYPE_CATEGORY(UIEvent, static_cast&lt;int&gt;(EventCategory::UI))
};

// UI system with event bubbling
class UISystem {
public:
    void DispatchEvent(UIEvent&amp; event) {
        UIElement* target = event.GetTarget();

        // Capturing phase (top-down)
        std::vector&lt;UIElement*&gt; path;
        UIElement* current = target;

        while (current) {
            path.push_back(current);
            current = current-&gt;GetParent();
        }

        // Dispatch to each element in the path (bottom-up)
        for (auto it = path.rbegin(); it != path.rend(); ++it) {
            (*it)-&gt;OnEvent(event);

            if (event.IsPropagationStopped()) {
                break;
            }
        }
    }
};</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_conclusion"><a class="anchor" href="#_conclusion"></a>Conclusion</h3>
<div class="paragraph">
<p>A well-designed event system is crucial for creating a flexible and maintainable engine architecture. By implementing the techniques described in this section, you can create a system that:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Decouples subsystems, making your code more modular and easier to maintain</p>
</li>
<li>
<p>Provides type-safe event handling</p>
</li>
<li>
<p>Supports different event delivery patterns</p>
</li>
<li>
<p>Can be extended with advanced features like filtering, priorities, and bubbling</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This concludes our exploration of engine architecture. In this chapter, we&#8217;ve covered:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Architectural patterns for structuring your engine</p>
</li>
<li>
<p>Component systems for building flexible game objects</p>
</li>
<li>
<p>Resource management for efficiently handling assets</p>
</li>
<li>
<p>Rendering pipeline design for flexible and efficient rendering</p>
</li>
<li>
<p>Event systems for decoupled communication between subsystems</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>With these foundations in place, you&#8217;re well-equipped to build a robust and flexible rendering engine that can be extended to support a wide range of features and techniques.</p>
</div>
<div class="paragraph">
<p><a href="05_rendering_pipeline.adoc">Previous: Rendering Pipeline</a> | <a href="conclusion.adoc">Next: Conclusion</a></p>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<script id="site-script" src="../../../../_/js/site.js" data-ui-root-path="../../../../_"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
<script src="../../../../_/js/vendor/split.js"></script>
<script>
    // Splitter should only be visible in non-mobile layouts (where a hamburger menu is used for nav)
    var width = (window.innerWidth > 0) ? window.innerWidth : screen.width;
    var mobileNav = (width < 1024);

    if (!mobileNav) {
        var sizes = localStorage.getItem('split-sizes')

        if (sizes) {
            sizes = JSON.parse(sizes)
        } else {
            sizes = [25, 75]
        }

        var split = Split(['#split-0', '#split-1'], {
            sizes: sizes,
            onDragEnd: function (sizes) {
                localStorage.setItem('split-sizes', JSON.stringify(sizes))
            },
        })
    }
</script>
<script src="../../../../_/js/vendor/lunr.js" defer></script>
<script src="https://cdn.jsdelivr.net/pako/1.0.3/pako.min.js" defer></script>
<script src="../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../.." data-snippet-length="100" data-stylesheet="../../../../_/css/search.css" defer></script>
<script>
window.addEventListener('DOMContentLoaded', function(){
  try {
    var script = document.getElementById('search-ui-script');
    var siteRoot = (script && script.getAttribute('data-site-root-path')) || '';
    var manifestUrl = siteRoot + '/search-index/manifest.json';
    fetch(manifestUrl)
      .then(function (r) { return r.ok ? r.json() : Promise.reject(new Error('manifest not found')) })
      .then(function (manifest) { antoraSearch.bootstrap(lunr, manifest, siteRoot); })
      .catch(function () {
        var s = document.createElement('script');
        s.async = true;
        s.src = siteRoot + '/search-index.js';
        document.head.appendChild(s);
      });
  } catch (e) {
    // Fallback to monolithic index if anything goes wrong
    var s = document.createElement('script');
    s.async = true;
    s.src = '../../../../search-index.js';
    document.head.appendChild(s);
  }
});
</script>
<script async src="../../../../_/js/vendor/tabs.js"></script>
  </body>
</html>

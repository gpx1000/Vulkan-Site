<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>VK_QCOM_data_graph_model :: Vulkan Documentation Project</title>
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../../../_/css/site.css">
    <script>var uiRootPath = '../../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../../..">Vulkan Documentation Project</a>
      <div class="navbar-item">
        <img alt="Vulkan White Label" src="../../../../_/Vulkan_White_Dec16.svg" height="100%" />
      </div>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <label for="search-input"></label><input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <!-- <a class="navbar-item" href="#">Home</a> -->
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Specs</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="../../../../spec/latest/chapters/introduction.html">Vulkan 1.3</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Guides</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="../../../../guide/latest/index.html">Vulkan Guide</a>
          </div>
        </div>
            <!--
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Tools</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">TBD</a>
          </div>
        </div>
            -->
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Tutorial</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="../../../../tutorial/latest/index.html">Vulkan Tutorial</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Samples</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="../../../../samples/latest/README.html">Vulkan Samples</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Help</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="https://discord.gg/vulkan">Vulkan Discord</a>
            <a class="navbar-item" href="https://khr.io/khrdiscord">Khronos Discord</a>
          </div>
        </div>
            <!--
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
            -->
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="features" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Vulkan Feature Descriptions</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Vulkan Roadmap and Feature Descriptions</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Roadmap.html">Vulkan Roadmap</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Feature Descriptions</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_AMDX_dense_geometry_format.html">VK_AMDX_dense_geometry_format</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_AMDX_shader_enqueue.html">VK_AMDX_shader_enqueue</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_AMD_anti_lag.html">VK_AMD_anti_lag</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_AMD_shader_early_and_late_fragment_tests.html">VK_AMD_shader_early_and_late_fragment_tests</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_ANDROID_external_format_resolve.html">VK_ANDROID_external_format_resolve</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_ARM_performance_counters_by_region.html">VK_ARM_performance_counters_by_region</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_ARM_pipeline_opacity_micromap.html">VK_ARM_pipeline_opacity_micromap</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_ARM_render_pass_striped.html">VK_ARM_render_pass_striped</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_ARM_tensors.html">VK_ARM_tensors</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_attachment_feedback_loop_dynamic_state.html">VK_EXT_attachment_feedback_loop_dynamic_state</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_attachment_feedback_loop_layout.html">VK_EXT_attachment_feedback_loop_layout</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_calibrated_timestamps.html">VK_EXT_calibrated_timestamps</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_custom_resolve.html">VK_EXT_custom_resolve</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_depth_bias_control.html">VK_EXT_depth_bias_control</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_depth_clamp_control.html">VK_EXT_depth_clamp_control</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_descriptor_buffer.html">VK_EXT_descriptor_buffer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_device_fault.html">VK_EXT_device_fault</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_device_generated_commands.html">VK_EXT_device_generated_commands</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_dynamic_rendering_unused_attachments.html">VK_EXT_dynamic_rendering_unused_attachments</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_extended_dynamic_state3.html">VK_EXT_extended_dynamic_state3</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_external_memory_acquire_unmodified.html">VK_EXT_external_memory_acquire_unmodified</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_external_memory_metal.html">VK_EXT_external_memory_metal</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_fragment_density_map_offset.html">VK_EXT_fragment_density_map_offset</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_frame_boundary.html">Proposal: <code>VK_EXT_frame_boundary</code></a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_graphics_pipeline_library.html">VK_EXT_graphics_pipeline_library</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_host_image_copy.html">VK_EXT_host_image_copy</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_image_2d_array_of_3d.html">VK_EXT_image_2d_array_of_3d</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_image_compression_control.html">VK_EXT_image_compression_control</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_image_sliced_view_of_3d.html">VK_EXT_image_sliced_view_of_3d</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_layer_settings.html">VK_EXT_layer_settings</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_legacy_dithering.html">VK_EXT_legacy_dithering</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_legacy_vertex_attributes.html">VK_EXT_legacy_vertex_attributes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_map_memory_placed.html">VK_EXT_map_memory_placed</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_memory_decompression.html">VK_EXT_memory_decompression</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_mesh_shader.html">VK_EXT_mesh_shader</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_metal_objects.html">VK_EXT_metal_objects</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_multisampled_render_to_single_sampled.html">VK_EXT_multisampled_render_to_single_sampled</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_mutable_descriptor_type.html">VK_EXT_mutable_descriptor_type</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_non_seamless_cube_map.html">VK_EXT_non_seamless_cube_map</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_opacity_micromap.html">VK_EXT_opacity_micromap</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_pipeline_library_group_handles.html">VK_EXT_pipeline_library_group_handles</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_pipeline_protected_access.html">VK_EXT_pipeline_protected_access</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_present_mode_fifo_latest_ready.html">VK_EXT_present_mode_fifo_latest_ready</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_present_timing.html">VK_EXT_present_timing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_primitives_generated_query.html">VK_EXT_primitives_generated_query</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_rasterization_order_attachment_access.html">VK_EXT_rasterization_order_attachment_access</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_ray_tracing_invocation_reorder.html">VK_EXT_ray_tracing_invocation_reorder</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_shader_64bit_indexing.html">VK_EXT_shader_64bit_indexing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_shader_float8.html">VK_EXT_shader_float8</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_shader_module_identifier.html">VK_EXT_shader_module_identifier</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_shader_object.html">VK_EXT_shader_object</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_shader_replicated_composites.html">VK_EXT_shader_replicated_composites</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_shader_tile_image.html">VK_EXT_shader_tile_image</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_shader_uniform_buffer_unsized_array.html">VK_EXT_shader_uniform_buffer_unsized_array</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_subpass_merge_feedback.html">VK_EXT_subpass_merge_feedback</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_surface_maintenance1.html">VK_EXT_surface_maintenance1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_swapchain_maintenance1.html">VK_EXT_swapchain_maintenance1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_zero_initialize_device_memory.html">VK_EXT_zero_initialize_device_memory</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_GOOGLE_surfaceless_query.html">VK_GOOGLE_surfaceless_query</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_HUAWEI_cluster_culling_shader.html">VK_HUAWEI_cluster_culling_shader</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_HUAWEI_invocation_mask.html">VK_HUAWEI_invocation_mask</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_compute_shader_derivatives.html">VK_KHR_compute_shader_derivatives</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_cooperative_matrix.html">VK_KHR_cooperative_matrix</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_copy_memory_indirect.html">VK_KHR_copy_memory_indirect</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_dynamic_rendering.html">VK_KHR_dynamic_rendering</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_dynamic_rendering_local_read.html">VK_KHR_dynamic_rendering_local_read</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_fragment_shader_barycentric.html">VK_KHR_fragment_shader_barycentric</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_fragment_shading_rate.html">VK_KHR_fragment_shading_rate</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_load_store_op_none.html">VK_KHR_load_store_op_none</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_maintenance10.html">VK_KHR_maintenance10</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_maintenance5.html">VK_KHR_maintenance5</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_maintenance6.html">VK_KHR_maintenance6</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_maintenance7.html">VK_KHR_maintenance7</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_maintenance8.html">VK_KHR_maintenance8</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_maintenance9.html">VK_KHR_maintenance9</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_map_memory2.html">VK_KHR_map_memory2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_pipeline_binary.html">VK_KHR_pipeline_binary</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_present_id2.html">VK_KHR_present_id2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_present_mode_fifo_latest_ready.html">VK_KHR_present_mode_fifo_latest_ready</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_present_wait2.html">VK_KHR_present_wait2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_ray_tracing_position_fetch.html">VK_KHR_ray_tracing_position_fetch</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_shader_bfloat16.html">VK_KHR_shader_bfloat16</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_shader_expect_assume.html">VK_KHR_shader_expect_assume</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_shader_float_controls2.html">VK_KHR_shader_float_controls2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_shader_fma.html">VK_KHR_shader_fma</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_shader_integer_dot_product.html">VK_KHR_shader_integer_dot_product</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_shader_maximal_reconvergence.html">VK_KHR_shader_maximal_reconvergence</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_shader_quad_control.html">VK_KHR_shader_quad_control</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_shader_relaxed_extended_instruction.html">VK_KHR_shader_relaxed_extended_instruction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_shader_subgroup_rotate.html">Subgroup rotation instruction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_shader_untyped_pointers.html">VK_KHR_shader_untyped_pointers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_surface_maintenance1.html">VK_KHR_surface_maintenance1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_swapchain_maintenance1.html">VK_KHR_swapchain_maintenance1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_unified_image_layouts.html">VK_KHR_unified_image_layouts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_vertex_attribute_divisor.html">VK_KHR_vertex_attribute_divisor</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_video_decode_av1.html">VK_KHR_video_decode_av1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_video_decode_h264.html">VK_KHR_video_decode_h264</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_video_decode_h265.html">VK_KHR_video_decode_h265</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_video_decode_queue.html">VK_KHR_video_decode_queue</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_video_decode_vp9.html">VK_KHR_video_decode_vp9</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_video_encode_av1.html">VK_KHR_video_encode_av1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_video_encode_h264.html">VK_KHR_video_encode_h264</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_video_encode_h265.html">VK_KHR_video_encode_h265</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_video_encode_intra_refresh.html">VK_KHR_video_encode_intra_refresh</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_video_encode_quantization_map.html">VK_KHR_video_encode_quantization_map</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_video_encode_queue.html">VK_KHR_video_encode_queue</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_video_maintenance1.html">VK_KHR_video_maintenance1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_video_maintenance2.html">VK_KHR_video_maintenance2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_video_queue.html">VK_KHR_video_queue</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_LUNARG_direct_driver_loading.html">VK_LUNARG_direct_driver_loading</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_MSFT_layered_driver.html">VK_MSFT_layered_driver</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_NV_cluster_acceleration_structure.html">VK_NV_cluster_acceleration_structure</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_NV_cooperative_matrix2.html">VK_NV_cooperative_matrix2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_NV_cooperative_vector.html">VK_NV_cooperative_vector</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_NV_display_stereo.html">VK_NV_display_stereo</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_NV_external_compute_queue.html">VK_NV_external_compute_queue</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_NV_partitioned_acceleration_structure.html">VK_NV_partitioned_acceleration_structure</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_NV_ray_tracing_linear_swept_spheres.html">VK_NV_ray_tracing_linear_swept_spheres</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_NV_ray_tracing_validation.html">VK_NV_ray_tracing_validation</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="VK_QCOM_data_graph_model.html">VK_QCOM_data_graph_model</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_QCOM_image_processing.html">VK_QCOM_image_processing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_QCOM_tile_memory_heap.html">VK_QCOM_tile_memory_heap</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_QCOM_tile_properties.html">VK_QCOM_tile_properties</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_QCOM_tile_shading.html">VK_QCOM_tile_shading</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_VERSION_1_4.html">Vulkan 1.4</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VulkanBase.html">Vulkan Base</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Vulkan Feature Descriptions</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../../tutorial/latest/00_Introduction.html">Khronos Vulkan Tutorial</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../tutorial/latest/00_Introduction.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../glsl/latest/index.html">OpenGL Shading Language Specification</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../glsl/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../refpages/latest/refpages/index.html">Vulkan API Reference Pages</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../refpages/latest/refpages/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../index.html">Vulkan Feature Descriptions</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../guide/latest/index.html">Vulkan Guide</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../guide/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../samples/latest/README.html">Vulkan Samples</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../samples/latest/README.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../spec/latest/index.html">Vulkan Specification</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../spec/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../spec/latest/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Vulkan Feature Descriptions</a></li>
    <li>Feature Descriptions</li>
    <li><a href="VK_QCOM_data_graph_model.html">VK_QCOM_data_graph_model</a></li>
  </ul>
</nav>
    <!--
    -->
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">VK_QCOM_data_graph_model</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_problem_statement">1. Problem Statement</a></li>
<li><a href="#_solution_space">2. Solution Space</a></li>
<li><a href="#_proposal">3. Proposal</a>
<ul class="sectlevel2">
<li><a href="#_querying_engine_capabilities">3.1. Querying engine capabilities</a></li>
<li><a href="#_foreign_pipeline_creation">3.2. Foreign pipeline creation</a></li>
<li><a href="#_foreign_built_in_models">3.3. Foreign built-in models</a></li>
<li><a href="#_descriptor_sets">3.4. Descriptor sets</a></li>
<li><a href="#_tensors">3.5. Tensors</a></li>
<li><a href="#_command_buffers">3.6. Command buffers</a></li>
<li><a href="#_synchronization">3.7. Synchronization</a></li>
<li><a href="#_features_structure">3.8. Features structure</a></li>
</ul>
</li>
<li><a href="#_example">4. Example</a>
<ul class="sectlevel2">
<li><a href="#_prepare_cache">4.1. Prepare cache</a></li>
<li><a href="#_queue_properties">4.2. Queue properties</a></li>
<li><a href="#_engine_properties">4.3. Engine properties</a></li>
<li><a href="#_create_descriptor_set_layout">4.4. Create descriptor set layout</a></li>
<li><a href="#_create_pipeline_cache">4.5. Create pipeline cache</a></li>
<li><a href="#_create_pipeline">4.6. Create pipeline</a></li>
<li><a href="#_create_tensors">4.7. Create tensors</a></li>
<li><a href="#_create_aliased_image">4.8. Create aliased image</a></li>
<li><a href="#_create_descriptors">4.9. Create descriptors</a></li>
<li><a href="#_create_command_pool">4.10. Create command pool</a></li>
</ul>
</li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This document proposes a new extension which builds upon
<a href="https://docs.vulkan.org/spec/latest/appendices/extensions.html#VK_ARM_data_graph">VK_ARM_data_graph</a> to allow applications
to run QNN models with data graph pipelines.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_problem_statement"><a class="anchor" href="#_problem_statement"></a>1. Problem Statement</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Machine Learning models such as ONNX are defined as data graphs, and are used in workflows
such as PyTorch or TensorFlow. These graphs can be accelerated efficiently on heterogeneous compute
platforms, such as the Qualcomm&#174; AI Engine.</p>
</div>
<div class="paragraph">
<p>Image processing is a primary use case for these models, leveraging the Adreno&#8482; GPU for pre- and post-processing
tasks, and either the Hexagon&#8482; NPU or Adreno&#8482; GPU for model execution. However, the current workflow lacks
standardization, making seamless and efficient interoperability between these engines challenging.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_solution_space"><a class="anchor" href="#_solution_space"></a>2. Solution Space</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Vulkan is a natural fit as a standards platform for heterogeneous compute workflows. Data graph pipelines can
be leveraged to execute QNN models on the NPU or GPU and interop with the GPU&#8217;s image processing capabilities.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_proposal"><a class="anchor" href="#_proposal"></a>3. Proposal</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This proposal builds on two existing extensions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.vulkan.org/spec/latest/appendices/extensions.html#VK_ARM_tensors">VK_ARM_tensors</a> which defines tensor objects that can be used in the model&#8217;s inputs and outputs</p>
</li>
<li>
<p><a href="https://docs.vulkan.org/spec/latest/appendices/extensions.html#VK_ARM_data_graph">VK_ARM_data_graph</a>
which provides a framework to execute the models in data graph pipelines</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_querying_engine_capabilities"><a class="anchor" href="#_querying_engine_capabilities"></a>3.1. Querying engine capabilities</h3>
<div class="paragraph">
<p>First, applications need to enumerate the queue families using
<a href="https://docs.vulkan.org/spec/latest/chapters/devsandqueues.html#vkGetPhysicalDeviceQueueFamilyProperties">vkGetPhysicalDeviceQueueFamilyProperties</a>
and filtering out a list that supports the <code>VK_QUEUE_DATA_GRAPH_BIT_ARM</code>.</p>
</div>
<div class="paragraph">
<p>Next, applications can determine the engine properties of these queue families using
<a href="https://docs.vulkan.org/spec/latest/chapters/VK_ARM_data_graph/graphs.html#vkGetPhysicalDeviceQueueFamilyDataGraphPropertiesARM">vkGetPhysicalDeviceQueueFamilyDataGraphPropertiesARM</a></p>
</div>
<div class="paragraph">
<p>The query will return a paired list of the engine and operations that are supported by each queue family. Each may exist in the list
more than once if they are linking multiple operations and/or engines of the same type together, such as a single engine
supporting multiple operations.</p>
</div>
<div class="paragraph">
<p>This extension exposes new engines to run neural models for the Qualcomm&#174; AI Engine:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">VK_PHYSICAL_DEVICE_DATA_GRAPH_PROCESSING_ENGINE_TYPE_NEURAL_QCOM  = 1000629000  // Hexagon(TM) NPU
VK_PHYSICAL_DEVICE_DATA_GRAPH_PROCESSING_ENGINE_TYPE_COMPUTE_QCOM = 1000629001  // Adreno(TM) GPU - reserved for future use</code></pre>
</div>
</div>
<div class="paragraph">
<p>Only external semaphores and memory are permitted with foreign engines. The application can query the supported
external handle types with
<a href="https://docs.vulkan.org/spec/latest/chapters/VK_ARM_data_graph/graphs.html#vkGetPhysicalDeviceQueueFamilyDataGraphProcessingEnginePropertiesARM">vkGetPhysicalDeviceQueueFamilyDataGraphProcessingEnginePropertiesARM</a>.</p>
</div>
<div class="paragraph">
<p>The extension also exposes new operations, which defines the model and/or algorithm to run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">VK_PHYSICAL_DEVICE_DATA_GRAPH_OPERATION_TYPE_NEURAL_MODEL_QCOM  = 1000629000
VK_PHYSICAL_DEVICE_DATA_GRAPH_OPERATION_TYPE_BUILTIN_MODEL_QCOM = 1000629001</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_PHYSICAL_DEVICE_DATA_GRAPH_OPERATION_TYPE_NEURAL_MODEL_QCOM</code> defines operations that can execute a compatible
data graph model provided by the application. The <code>VkPhysicalDeviceDataGraphOperationSupportARM::name</code> defines
the type of model supported.</p>
</li>
<li>
<p><code>VK_PHYSICAL_DEVICE_DATA_GRAPH_OPERATION_TYPE_BUILTIN_MODEL_QCOM</code> defines operations that can execute a predefined
model that is provided by the implementation. The <code>VkPhysicalDeviceDataGraphOperationSupportARM::name</code> defines
the type of built-in model.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For each case, defining the <code>name</code> of the operations are out of scope of of this document. Please refer to the appropriate
documentation for specific interfacing instructions.</p>
</div>
</div>
<div class="sect2">
<h3 id="_foreign_pipeline_creation"><a class="anchor" href="#_foreign_pipeline_creation"></a>3.2. Foreign pipeline creation</h3>
<div class="sect3">
<h4 id="_prepare_external_pipeline_cache"><a class="anchor" href="#_prepare_external_pipeline_cache"></a>3.2.1. Prepare external pipeline cache</h4>
<div class="paragraph">
<p>In order for the application to supply a data graph model to the implementation for foreign engines, it must first
prepare a binary using tooling external to Vulkan.</p>
</div>
<div class="paragraph">
<p>This workflow is out of scope of this document, but for example at the time of this writing,
<code>VK_PHYSICAL_DEVICE_DATA_GRAPH_OPERATION_TYPE_NEURAL_MODEL_QCOM</code> operation types with the "Generic QNN" name
documentation can be found at the <a href="https://docs.qualcomm.com/bundle/publicresource/topics/80-63442-50/introduction.html?product=1601111740009302">QNN Documentation</a>.</p>
</div>
<div class="paragraph">
<p>See the <a href="https://docs.qualcomm.com/bundle/publicresource/topics/80-63442-50/setup.html?product=1601111740009302">setup</a> instructions for information about how to
convert a model to QNN, quantize, serialize, and prepare a Vulkan pipeline cache blob.</p>
</div>
<div class="paragraph">
<p>The pipeline cache blob, if properly constructed, will have the following cache header:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">VK_PIPELINE_CACHE_HEADER_VERSION_DATA_GRAPH_QCOM  = 1000629000
VK_DATA_GRAPH_MODEL_TOOLCHAIN_VERSION_LENGTH_QCOM = 3U

typedef enum VkDataGraphModelCacheTypeQCOM {
    VK_DATA_GRAPH_MODEL_CACHE_TYPE_GENERIC_BINARY_QCOM = 0,          // Usable with "Generic QNN" operation name (out of scope of this document)
    VK_DATA_GRAPH_MODEL_CACHE_TYPE_INVALID_QCOM        = 0xFFFFFFFF,
} VkDataGraphModelCacheTypeQCOM;

typedef struct VkPipelineCacheHeaderVersionDataGraphQCOM {
    uint32_t                      headerSize;
    VkPipelineCacheHeaderVersion  headerVersion;
    VkDataGraphModelCacheTypeQCOM cacheType;
    uint32_t                      cacheVersion;
    uint32_t                      toolchainVersion[VK_DATA_GRAPH_MODEL_TOOLCHAIN_VERSION_LENGTH_QCOM];
} VkPipelineCacheHeaderVersionDataGraphQCOM;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>headerSize</code> specifies the size in bytes of the header</p>
</li>
<li>
<p><code>headerVersion</code> specifies <code>VK_PIPELINE_CACHE_HEADER_VERSION_DATA_GRAPH_QCOM</code> for this header type</p>
</li>
<li>
<p><code>cacheType</code> specifies the type of model binary contained within</p>
</li>
<li>
<p><code>cacheVersion</code> specifies the serialized encoding version of the model binary contained within</p>
</li>
<li>
<p><code>toolchainVersion</code> specifies the toolchain version that built the model binary contained within</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_import_pipeline_cache"><a class="anchor" href="#_import_pipeline_cache"></a>3.2.2. Import pipeline cache</h4>
<div class="paragraph">
<p>Once a model is properly serialized with a <code>VkPipelineCacheHeaderVersionDataGraphQCOM</code> header, it can be imported into
Vulkan by creating a pipeline cache with
<a href="https://docs.vulkan.org/spec/latest//chapters/pipelines.html#vkCreatePipelineCache">vkCreatePipelineCache</a> by specifying the blob in the
<code>VkPipelineCacheCreateInfo::pInitialData</code> parameter.</p>
</div>
<div class="paragraph">
<p>It is out of scope for Vulkan or the Vulkan Validation Layers (VVL) to verify that the blob is compatible with the device,
with the exception that <code>dataGraphModel</code> feature must be enabled to import a blob with the
<code>VK_PIPELINE_CACHE_HEADER_VERSION_DATA_GRAPH_QCOM</code> header version.</p>
</div>
<div class="paragraph">
<p>If it is not compatible, then
<a href="https://docs.vulkan.org/spec/latest/chapters/VK_ARM_data_graph/graphs.html#vkCreateDataGraphPipelinesARM">vkCreateDataGraphPipelinesARM</a> will
return <code>VK_PIPELINE_COMPILE_REQUIRED</code>. The application should refer to the appropriate documentation to determine
compatible cache types, operation types, and respective versions.</p>
</div>
</div>
<div class="sect3">
<h4 id="_create_data_graph_pipeline"><a class="anchor" href="#_create_data_graph_pipeline"></a>3.2.3. Create data graph pipeline</h4>
<div class="paragraph">
<p>Imported data graph models can be used to create a data graph pipeline by including the pipeline cache to
the <a href="https://docs.vulkan.org/spec/latest/chapters/VK_ARM_data_graph/graphs.html#vkCreateDataGraphPipelinesARM">vkCreateDataGraphPipelinesARM</a> call.</p>
</div>
<div class="paragraph">
<p>The appropriate engine type must be attached to the <code>VkDataGraphPipelineCreateInfoARM::pNext</code> with the
<a href="https://docs.vulkan.org/spec/latest/chapters/VK_ARM_data_graph/graphs.html#VkDataGraphProcessingEngineCreateInfoARM">VkDataGraphProcessingEngineCreateInfoARM</a>
structure. This specializes the pipeline to only be bindable to command buffers allocated from pools also created with
this engine type.</p>
</div>
<div class="paragraph">
<p><code>VkDataGraphPipelineCreateInfoARM::flags</code> must have at least <code>VK_PIPELINE_CREATE_2_FAIL_ON_PIPELINE_COMPILE_REQUIRED_BIT</code> set.
If anything goes wrong with importing the binary, <code>VK_PIPELINE_COMPILE_REQUIRED</code> will be returned.</p>
</div>
<div class="paragraph">
<p>Imported blobs may have multiple models, a
<a href="https://docs.vulkan.org/spec/latest/chapters/VK_ARM_data_graph/graphs.html#VkDataGraphPipelineIdentifierCreateInfoARM">VkDataGraphPipelineIdentifierCreateInfoARM</a>
must be chained to the <code>VkDataGraphPipelineCreateInfoARM::pNext</code>. See the appropriate documentation to acquire the correct
<code>VkDataGraphPipelineIdentifierCreateInfoARM::pIdentifer</code> for the constructed blob.</p>
</div>
<div class="paragraph">
<p><code>VkDataGraphPipelineResourceInfoARM</code> is not permitted for data graphs being imported in this manner. Resources, that is
the model&#8217;s inputs and outputs, are defined by the appropriate documentation for how they can be compatible for the built model,
obtainable from the model&#8217;s author.</p>
</div>
<div class="paragraph">
<p>The input/output binding mappings to construct the <code>VkPipelineLayout</code> should be obtainable from the documentation of the
tool that packed the model into a pipeline cache blob.</p>
</div>
<div class="paragraph">
<p>Session memory must be allocated with external memory created with a handle type retrieved from
<code>VkQueueFamilyDataGraphProcessingEnginePropertiesARM::foreignMemoryHandleTypes</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_foreign_built_in_models"><a class="anchor" href="#_foreign_built_in_models"></a>3.3. Foreign built-in models</h3>
<div class="paragraph">
<p>The application prepares no pipeline blob or shader module for the built-in models.
These models are provided by the implementation and selected at compile time by providing the following
structure to <code>VkDataGraphPipelineCreateInfoARM::pNext</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">typedef struct VkDataGraphPipelineBuiltinModelCreateInfoQCOM {
    VkStructureType                                     sType;
    void*                                               pNext;
    const VkPhysicalDeviceDataGraphOperationSupportARM* pOperation;
} VkDataGraphPipelineBuiltinModelCreateInfoQCOM;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>pOperation</code> specifies the built-in operation and must match all fields with a
supported operation for the engine provided to the pipeline creation in <code>VkDataGraphProcessingEngineCreateInfoARM</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Some built-in models require arguments to be passed, these can be passed with
<a href="https://docs.vulkan.org/spec/latest/chapters/VK_ARM_data_graph/graphs.html#VkDataGraphPipelineCompilerControlCreateInfoARM">VkDataGraphPipelineCompilerControlCreateInfoARM</a>.</p>
</div>
<div class="paragraph">
<p>See the appropriate documentation for what each built-in model does and the arguments that it takes, as well as any
input and output descriptors it needs to define in the <code>VkPipelineLayout</code>.</p>
</div>
<div class="paragraph">
<p>Creating the pipeline is otherwise very similar to foreign models:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VkDataGraphProcessingEngineCreateInfoARM</code> must be provided with the appropriate engine type</p>
</li>
<li>
<p><code>VK_PIPELINE_CREATE_2_FAIL_ON_PIPELINE_COMPILE_REQUIRED_BIT</code> must be provided, and will fail if arguments are not compatible
with the operation</p>
</li>
<li>
<p><code>VkDataGraphPipelineResourceInfoARM</code> must not be provided, resource compatibility is defined by the operation,
not by the application</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Additionally, unlike foreign models, <code>pipelineCache</code> is ignored.</p>
</div>
</div>
<div class="sect2">
<h3 id="_descriptor_sets"><a class="anchor" href="#_descriptor_sets"></a>3.4. Descriptor sets</h3>
<div class="paragraph">
<p>Descriptor sets must be allocated from a descriptor pool with <code>VkDataGraphProcessingEngineCreateInfoARM</code> specified.</p>
</div>
<div class="paragraph">
<p>Descriptor buffers must be allocated with the <code>VK_BUFFER_USAGE_2_DATA_GRAPH_FOREIGN_DESCRIPTOR_BIT_ARM</code> usage flag if
the descriptor buffer will bound for use in a foreign engine.</p>
</div>
<div class="paragraph">
<p>All tensors bound to a foreign descriptor set must adhere to the binding locations provided by the appropriate
documentation and be allocated with external memory created with a handle type retrieved from
<code>VkQueueFamilyDataGraphProcessingEnginePropertiesARM::foreignMemoryHandleTypes</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_tensors"><a class="anchor" href="#_tensors"></a>3.5. Tensors</h3>
<div class="paragraph">
<p>Foreign tensors must be bound to external memory using
<a href="https://docs.vulkan.org/spec/latest/chapters/resources.html#VkExternalMemoryTensorCreateInfoARM">VkExternalMemoryTensorCreateInfoARM</a> and
include the <code>VK_TENSOR_USAGE_DATA_GRAPH_BIT_ARM</code> usage.</p>
</div>
<div class="paragraph">
<p>See the appropriate documentation for creating tensors compatible with the inputs and outputs of the model regarding
how to set the other parameters. This should be obtainable from the creator of the model.</p>
</div>
<div class="paragraph">
<p>In order to interop the tensors with the GPU, they must be aliased to an image using <code>VK_TENSOR_USAGE_IMAGE_ALIASING_BIT_ARM</code>.
See the <a href="https://docs.vulkan.org/spec/latest/chapters/resources.html#resources-memory-aliasing">memory aliasing</a> section for rules about
tensor/image aliasing.</p>
</div>
<div id="tensor-compatibility" class="paragraph">
<p>It is possible that the parameters required for tensor creation of the model&#8217;s inputs and outputs are not compatible
or optimal with the GPU. In this case, the application should alias a tensor that is compatible with an image and GPU, then use
<a href="https://docs.vulkan.org/spec/latest/chapters/copies.html#vkCmdCopyTensorARM">vkCmdCopyTensorARM</a> to copy it to/from a tensor that is compatible with
the model.</p>
</div>
<div class="paragraph">
<p>Optimal tiled aliased images will always be compatible with the model&#8217;s tensors,
provided the model/engine supports that tiling mode, and the <code>memory aliasing</code> rules are followed.</p>
</div>
<div class="paragraph">
<p>To determine if linear images are compatible with the model, use
<a href="https://docs.vulkan.org/spec/latest/chapters/resources.html#vkGetImageSubresourceLayout">vkGetImageSubresourceLayout</a> to get
the required padding for the image and see if they are permitted by the model for the input/output tensor dimension
strides, following the mapping between subresource layout and tensor dimensions as described in
<code>memory aliasing</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_command_buffers"><a class="anchor" href="#_command_buffers"></a>3.6. Command buffers</h3>
<div class="paragraph">
<p>Command buffers must be allocated from a pool that was created with <code>VkDataGraphProcessingEngineCreateInfoARM</code> specified.</p>
</div>
<div class="paragraph">
<p>If the <code>queueFamilyIndex</code> that was used to create the pool only supports <code>VK_QUEUE_DATA_GRAPH_BIT_ARM</code>, the number of
commands that can be recorded to the command buffer are few and specified by the <code>Supported Queue Types</code> property
listed after each command definition in the specification.</p>
</div>
<div class="paragraph">
<p>At the time of this writing, the following commands are permitted:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>vkCmdBindPipeline</p>
</li>
<li>
<p>vkCmdBindDescriptorSets</p>
</li>
<li>
<p>vkCmdBindDescriptorBuffersEXT</p>
</li>
<li>
<p>vkCmdSetDescriptorBufferOffsetsEXT</p>
</li>
<li>
<p>vkCmdSetDescriptorBufferOffsets2EXT</p>
</li>
<li>
<p>vkCmdDispatchDataGraphARM</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The
<a href="https://docs.vulkan.org/spec/latest/chapters/VK_ARM_data_graph/graphs.html#vkCmdDispatchDataGraphARM">vkCmdDispatchDataGraphARM</a> command
is what records the execution of the data graph.</p>
</div>
</div>
<div class="sect2">
<h3 id="_synchronization"><a class="anchor" href="#_synchronization"></a>3.7. Synchronization</h3>
<div class="paragraph">
<p>There are no barriers permitted unless other queue types are exposed for the family. This is left for a future
extension for data graph only barriers. No implicit barriers are issued by dispatch and
any hazards between dispatches must be split between different queue submit batches to enforce barriers using semaphores.</p>
</div>
<div class="paragraph">
<p>Semaphores executing with a queue created from a family that includes a foreign engine must be created as external
using one of the handle types retrieved from <code>foreignSemaphoreHandleTypes</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_features_structure"><a class="anchor" href="#_features_structure"></a>3.8. Features structure</h3>
<div class="paragraph">
<p>The following feature structure is proposed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">typedef struct VkPhysicalDeviceDataGraphModelFeaturesQCOM {
    VkStructureType    sType;
    void*              pNext;
    VkBool32           dataGraphModel;
} VkPhysicalDeviceDataGraphModelFeaturesQCOM;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>dataGraphModel</code> the main enable feature for this extension</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_example"><a class="anchor" href="#_example"></a>4. Example</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_prepare_cache"><a class="anchor" href="#_prepare_cache"></a>4.1. Prepare cache</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The following is an upscaling example to illustrate a workflow at the time of this writing.
Links and tools may change with time, please refer to the correct documentation for current practices.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell"># See offline documentation to generate and push the following to device:
#   * PipelineCache.bin
#   * PipelineIdentifier.bin
#   * GraphData.json</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_queue_properties"><a class="anchor" href="#_queue_properties"></a>4.2. Queue properties</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// &lt;Query queue family properties and set VkQueueFamilyProperties to pProps&gt;
for (uint32_t i = 0; i &lt; count; i++) {
    if (pProps[i].queueFlags &amp; VK_QUEUE_DATA_GRAPH_BIT_ARM) {
        // Get the graph properties
        uint32_t graphCount = 0;
        vkGetPhysicalDeviceQueueFamilyDataGraphPropertiesARM(device, i, &amp;graphCount, nullptr);

        VkQueueFamilyDataGraphPropertiesARM* pGraphProps = new VkQueueFamilyDataGraphPropertiesARM[graphCount];

        for (uint32_t j = 0; j &lt; graphCount; j++) {
            pGraphProps[j].sType = VK_STRUCTURE_TYPE_QUEUE_FAMILY_DATA_GRAPH_PROPERTIES_ARM;
        }

        vkGetPhysicalDeviceQueueFamilyDataGraphPropertiesARM(device, i, &amp;graphCount, pGraphProps);

        for (uint32_t j = 0; j &lt; graphCount; j++) {
            // Find engine for Hexagon(TM) NPU, with Generic QNN operation
            if ((pGraphProps[j].engine.type == VK_PHYSICAL_DEVICE_DATA_GRAPH_PROCESSING_ENGINE_TYPE_NEURAL_QCOM)           &amp;&amp;
                (pGraphProps[j].engine.isForeign)                                                                          &amp;&amp;
                (pGraphProps[j].operation.operationType == VK_PHYSICAL_DEVICE_DATA_GRAPH_OPERATION_TYPE_NEURAL_MODEL_QCOM) &amp;&amp;
                (strncmp(pGraphProps[j].operation.name, "Generic QNN", sizeof(pGraphProps[j].operation.name)))) {
                // NOTE Check pGraphProps[j].operation.version is compatible from appropriate documentation
                // &lt;Suitable queueFamilyIndex found at `i`&gt;
            }
        }
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_engine_properties"><a class="anchor" href="#_engine_properties"></a>4.3. Engine properties</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">VkPhysicalDeviceQueueFamilyDataGraphProcessingEngineInfoARM info = {
    VK_STRUCTURE_TYPE_PHYSICAL_DEVICE_QUEUE_FAMILY_DATA_GRAPH_PROCESSING_ENGINE_INFO_ARM, // sType
    nullptr,                                                                              // pNext
    queueFamilyIndex,                                                                     // queueFamilyIndex
    VK_PHYSICAL_DEVICE_DATA_GRAPH_PROCESSING_ENGINE_TYPE_NEURAL_QCOM                      // engineType
};

VkQueueFamilyDataGraphProcessingEnginePropertiesARM props = {
    VK_STRUCTURE_TYPE_QUEUE_FAMILY_DATA_GRAPH_PROCESSING_ENGINE_PROPERTIES_ARM  // sType
};

vkGetPhysicalDeviceQueueFamilyDataGraphProcessingEnginePropertiesARM(device, &amp;info, &amp;props);

// &lt;Determine which external handle to use from props.foreignSemaphoreHandleTypes and props.foreignMemoryHandleTypes&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_create_descriptor_set_layout"><a class="anchor" href="#_create_descriptor_set_layout"></a>4.4. Create descriptor set layout</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// NOTE See GraphData.json for the required inputs/outputs, this model takes 1 of each
VkDescriptorSetLayoutBinding bindings[] = {
    {
        inputBinding,                                          // binding - sourced from GraphData.json
        VK_DESCRIPTOR_TYPE_TENSOR_ARM,                         // descriptorType
        1,                                                     // descriptorCount
        VK_SHADER_STAGE_COMPUTE_BIT,                           // stageFlags
        nullptr                                                // pImmutableSamplers
    },
    {
        outputBinding,                                         // binding - sourced from GraphData.json
        VK_DESCRIPTOR_TYPE_TENSOR_ARM,                         // descriptorType
        1,                                                     // descriptorCount
        VK_SHADER_STAGE_COMPUTE_BIT,                           // stageFlags
        nullptr                                                // pImmutableSamplers
    }
};

// &lt;Create descriptor set layout like normal&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_create_pipeline_cache"><a class="anchor" href="#_create_pipeline_cache"></a>4.5. Create pipeline cache</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">FILE* pFile = fopen("/sdcard/PipelineCache.bin", "rb");
fseek(pFile, 0, SEEK_END);

long size = ftell(pFile);
fseek(pFile, 0, SEEK_SET);

uint8_t* pCacheBlob = new uint8_t[size];
size_t   bytesRead  = fread(pCacheBlob, 1, size, pFile);

VkPipelineCacheCreateInfo cacheInfo = {
    VK_STRUCTURE_TYPE_PIPELINE_CACHE_CREATE_INFO,   // sType
    nullptr,                                        // pNext
    0,                                              // flags
    size,                                           // initialDataSize
    pCacheBlob                                      // pInitialData
};

vkCreatePipelineCache(device, &amp;cacheInfo, nullptr, pPipelineCache);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_create_pipeline"><a class="anchor" href="#_create_pipeline"></a>4.6. Create pipeline</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">FILE* pFile = fopen("/sdcard/PipelineIdentifier.bin", "rb");
fseek(pFile, 0, SEEK_END);

long size = ftell(pFile);
fseek(pFile, 0, SEEK_SET);

uint8_t* pIdentifierBlob = uint8_t char[size];
size_t   bytesRead       = fread(pIdentifierBlob, 1, size, pFile);

VkPhysicalDeviceDataGraphProcessingEngineARM engine = {
    VK_PHYSICAL_DEVICE_DATA_GRAPH_PROCESSING_ENGINE_TYPE_NEURAL_QCOM,   // type
    true                                                                // isForeign
};

VkDataGraphProcessingEngineCreateInfoARM engineInfo = {
    VK_STRUCTURE_TYPE_DATA_GRAPH_PROCESSING_ENGINE_CREATE_INFO_ARM,   // sType
    nullptr,                                                          // pNext
    1,                                                                // processingEngineCount
    &amp;engine                                                           // pProcessingEngines
};

VkDataGraphPipelineIdentifierCreateInfoARM identifierInfo = {
    VK_STRUCTURE_TYPE_DATA_GRAPH_PIPELINE_IDENTIFIER_CREATE_INFO_ARM,   // sType
    &amp;engineInfo,                                                        // pNext
    size,                                                               // identifierSize
    pIdentifierBlob                                                     // pIdentifier
};

VkDataGraphPipelineCreateInfoARM createInfo = {
    VK_STRUCTURE_TYPE_DATA_GRAPH_PIPELINE_CREATE_INFO_ARM,        // sType
    &amp;identifierInfo,                                              // pNext
    VK_PIPELINE_CREATE_2_FAIL_ON_PIPELINE_COMPILE_REQUIRED_BIT,   // flags
    layout,                                                       // layout - created from descriptor set layout like normal
    0,                                                            // resourceInfoCount
    nullptr                                                       // pResourceInfos
};

vkCreateDataGraphPipelinesARM(device, VK_nullptr_HANDLE, pipelineCache, 1, &amp;createInfo, nullptr, &amp;pPipeline);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_create_tensors"><a class="anchor" href="#_create_tensors"></a>4.7. Create tensors</h3>
<div class="paragraph">
<p>This example assumes that the model&#8217;s tensors are not compatible with the GPU images
and will show how to create 2 different kinds of tensors - model tensors and aliased tensors.
The intent here would be to render to the gpu attachment with the aliased tensor
then perform a tensor copy to the model tensor.</p>
</div>
<div class="paragraph">
<p><code>memFlags</code> is the chosen external handle type that was previously queried as being supported by the engine
for the model tensors being used directly by it. When <code>memFlags</code> == 0 the tensor path being used is the
aliased tensor since it does not need to be external in this example as they are not used directly by the model.</p>
</div>
<div class="paragraph">
<p>To determine if a model&#8217;s tensor is compatible with the GPU images, see the
<a href="#tensor-compatibility">Tensor section</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">uint32_t queueFamilies[] = {
    graphicsFamilyIndex,    // Find this queue family
    queueFamilyIndex        // Hexagon(TM) NPU queue family
};

VkExternalMemoryTensorCreateInfoARM externalMem = {
    VK_STRUCTURE_TYPE_EXTERNAL_MEMORY_TENSOR_CREATE_INFO_ARM,   // sType
    nullptr,                                                    // pNext
    memFlags                                                    // handleTypes
};

uint32_t dimensions[][4] = {
    {1, 540, 960, 3},           // Input tensor
    {1, 1080, 1920, 3},         // Output tensor
};

// NOTE For the model tensors, these values needs to be found in offline documentation for the model
VkTensorDescriptionARM desc = {
        VK_STRUCTURE_TYPE_TENSOR_DESCRIPTION_ARM,             // sType
        nullptr,                                              // pNext
        VK_TENSOR_TILING_OPTIMAL_ARM,                         // tiling
        VK_FORMAT_R8_UNORM,                                   // format
        ARRAY_SIZE(dimensions[(isInput) ? 0 : 1]),            // dimensionCount
        &amp;dimensions[(isInput ? 0 : 1)],                       // pDimensions
        nullptr,                                              // pStrides - implementation determines for optimal
        VK_TENSOR_USAGE_TRANSFER_DST_BIT_ARM |                // usage - add transfer usage since tensors will be copied;
        VK_TENSOR_USAGE_TRANSFER_SRC_BIT_ARM |                //         could make this more exact though, for example
        ((memFlags) ? VK_TENSOR_USAGE_DATA_GRAPH_BIT_ARM :    //         the input model tensor only needs to be a DST
                      VK_TENSOR_USAGE_IMAGE_ALIASING_BIT_ARM) //         transfer to copy render target data into it
};

// If memFlags is 0 then creating internal tensor only, not for use with foreign
VkTensorCreateInfoARM info = {
    VK_STRUCTURE_TYPE_TENSOR_CREATE_INFO_ARM,     // sType
    (memFlags) ? &amp;externalMem : nullptr,          // pNext
    0,                                            // flags
    &amp;desc,                                        // pDescription
    VK_SHARING_MODE_EXCLUSIVE,                    // sharingMode
    (memFlags) ? ARRAY_SIZE(queueFamilies) : 1,   // queueFamilyIndexCount
    queueFamilies,                                // pQueueFamilyIndices
};

vkCreateTensorARM(device, &amp;info, nullptr, pTensor);

VkTensorMemoryRequirementsInfoARM reqInfo = {
    VK_STRUCTURE_TYPE_TENSOR_MEMORY_REQUIREMENTS_INFO_ARM,    // sType
    nullptr,                                                  // pNext
    *pTensor                                                  // tensor
};

VkMemoryRequirements2 memReqs = {VK_STRUCTURE_TYPE_MEMORY_REQUIREMENTS_2};
vkGetTensorMemoryRequirementsARM(device, &amp;reqInfo, &amp;memReqs);

// Include this assuming dedicated is required (as it is per spec with the AHB export assumption above)
VkMemoryDedicatedAllocateInfoTensorARM = {
    VK_STRUCTURE_TYPE_MEMORY_DEDICATED_ALLOCATE_INFO_TENSOR_ARM,    // sType
    nullptr,                                                        // pNext
    *pTensor                                                        // tensor
};

VkExportMemoryAllocateInfo exportInfo = {
    VK_STRUCTURE_TYPE_EXPORT_MEMORY_ALLOCATE_INFO,          // sType
    &amp;dedicatedInfo,                                         // pNext
    memFlags                                                // handleTypes
};

VkMemoryAllocateInfo allocInfo = {
    VK_STRUCTURE_TYPE_MEMORY_ALLOCATE_INFO,                        // sType
    (memFlags) ? &amp;exportInfo : nullptr,                            // pNext
    memReqs.memoryRequirements.size,                               // allocationSize
    std::countr_zero(memReqs.memoryRequirements.memoryTypeBits)    // memoryTypeIndex - needs better algorithm to select this
};

VkDeviceMemory memory;
vkAllocateMemory(device, &amp;allocInfo, nullptr, &amp;memory);

// Should probably batch this up for all tensors ready to be bound
VkBindTensorMemoryInfoARM bindInfo = {
    VK_STRUCTURE_TYPE_BIND_TENSOR_MEMORY_INFO_ARM,          // sType
    nullptr,                                                // pNext
    *pTensor,                                               // tensor
    memory,                                                 // memory
    0                                                       // memoryOffset
};

if (memReqs)
{
    // View not needed if just doing a tensor copy, so make the views for the model tensors only
    vkBindTensorMemoryARM(device, 1, &amp;bindInfo);

    VkTensorViewCreateInfoARM viewInfo = {
        VK_STRUCTURE_TYPE_TENSOR_VIEW_CREATE_INFO_ARM,      // sType
        nullptr,                                            // pNext
        0,                                                  // flags
        *pTensor,                                           // tensor
        VK_FORMAT_R8_UNORM,                                 // format
    };

    vkCreateTensorViewARM(device, &amp;viewInfo, nullptr, pTensorView);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the gpu image is compatible with the model tensor, then only 1 type of tensor needs to be created
an aliased + external tensor, and the tensor copy can be omitted. The intent would be to
alias the offscreen render attachment and use that tensor directly in the model. The below
is an example on doing this with a linear image.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">uint32_t queueFamilies[] = {
    graphicsFamilyIndex,    // Find this queue family
    queueFamilyIndex        // Hexagon(TM) NPU queue family
};

VkExternalMemoryTensorCreateInfoARM externalMem = {
    VK_STRUCTURE_TYPE_EXTERNAL_MEMORY_TENSOR_CREATE_INFO_ARM,   // sType
    nullptr,                                                    // pNext
    memFlags                                                    // handleTypes
};

uint32_t dimensions[][4] = {
    {1, 540, 960, 3},           // Input tensor
    {1, 1080, 1920, 3},         // Output tensor
};

// subresourceLayout[0] was queried from the render target image
// subresourceLayout[1] was queried from the output image
uint32_t strides[][4] = {
    {subresourceLayout[0].depthPitch, subresourceLayout[0].rowPitch, 3, 1},
    {subresourceLayout[1].depthPitch, subresourceLayout[1].rowPitch, 3, 1}
};

VkTensorDescriptionARM desc = {
        VK_STRUCTURE_TYPE_TENSOR_DESCRIPTION_ARM,             // sType
        nullptr,                                              // pNext
        VK_TENSOR_TILING_LINEAR_ARM,                          // tiling
        VK_FORMAT_R8_UNORM,                                   // format
        ARRAY_SIZE(dimensions[(isInput) ? 0 : 1]),            // dimensionCount
        &amp;dimensions[(isInput ? 0 : 1)],                       // pDimensions
        &amp;strides[(isInput ? 0 : 1)],                          // pStrides
        VK_TENSOR_USAGE_TRANSFER_DST_BIT_ARM |                // usage
        VK_TENSOR_USAGE_TRANSFER_SRC_BIT_ARM |
        VK_TENSOR_USAGE_DATA_GRAPH_BIT_ARM   |
        VK_TENSOR_USAGE_IMAGE_ALIASING_BIT_ARM
};

// If memFlags is 0 then creating internal tensor only, not for use with foreign
VkTensorCreateInfoARM info = {
    VK_STRUCTURE_TYPE_TENSOR_CREATE_INFO_ARM,     // sType
    &amp;externalMem,                                 // pNext
    0,                                            // flags
    &amp;desc,                                        // pDescription
    VK_SHARING_MODE_EXCLUSIVE,                    // sharingMode
    ARRAY_SIZE(queueFamilies),                    // queueFamilyIndexCount
    queueFamilies,                                // pQueueFamilyIndices
};

vkCreateTensorARM(device, &amp;info, nullptr, pTensor);

// &lt;Allocate and bind memory like above, create the view&gt;&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_create_aliased_image"><a class="anchor" href="#_create_aliased_image"></a>4.8. Create aliased image</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// This uses VkTensorDescriptionARM set to pDesc to determine how to size the image
VkImageCreateInfo info = {
    VK_STRUCTURE_TYPE_IMAGE_CREATE_INFO,               // sType
    nullptr,                                           // pNext
    0,                                                 // flags
    VK_IMAGE_TYPE_2D,                                  // imageType
    GetGfxFormat(pDesc),                               // format - set to VK_FORMAT_R8G8B8_UNORM for {R8_UNORM, dimensions[count - 1] = 3}
    {pDesc-&gt;pDimensions[2], pDesc-&gt;pDimensions[1], 1}, // extent - NHWC
    1,                                                 // miplevels
    pDesc-&gt;pDimensions[0],                             // arrayLayers
    VK_SAMPLE_COUNT_1_BIT,                             // samples
    VK_IMAGE_TILING_OPTIMAL,                           // tiling
    VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT |              // usage - for render attachment image, switch usage for output image
    VK_IMAGE_USAGE_TENSOR_ALIASING_BIT_ARM,
    VK_SHARING_MODE_EXCLUSIVE,                         // sharingMode
    1,                                                 // queueFamilyIndexCount
    &amp;queueFamilyIndex,                                 // pQueueFamilyIndices
    VK_IMAGE_LAYOUT_UNDEFINED                          // initialLayout
};
vkCreateImage(device, &amp;info, nullptr, pImage);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_create_descriptors"><a class="anchor" href="#_create_descriptors"></a>4.9. Create descriptors</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">VkPhysicalDeviceDataGraphProcessingEngineARM engine = {
    VK_PHYSICAL_DEVICE_DATA_GRAPH_PROCESSING_ENGINE_TYPE_NEURAL_QCOM,   // type
    true                                                                // isForeign
};

VkDataGraphProcessingEngineCreateInfoARM engineInfo = {
    VK_STRUCTURE_TYPE_DATA_GRAPH_PROCESSING_ENGINE_CREATE_INFO_ARM,   // sType
    nullptr,                                                          // pNext
    1,                                                                // processingEngineCount
    &amp;engine                                                           // pProcessingEngines
};

VkDescriptorPoolSize sizes[] = {
    {VK_DESCRIPTOR_TYPE_TENSOR_ARM, 2}
};

VkDescriptorPoolCreateInfo poolInfo = {
    VK_STRUCTURE_TYPE_DESCRIPTOR_POOL_CREATE_INFO,          // sType
    &amp;engineInfo,                                            // pNext
    0,                                                      // flags
    1,                                                      // maxSets
    ARRAY_SIZE(sizes),                                      // poolSizeCount
    sizes                                                   // pPoolSizes
};

vkCreateDescriptorPool(device, &amp;poolInfo, nullptr, &amp;pool);

// &lt;allocate descriptor set using set layout and pool, assign to `set`&gt;

VkWriteDescriptorSetTensorARM tensorWrites[] = {
    {
        VK_STRUCTURE_TYPE_WRITE_DESCRIPTOR_SET_TENSOR_ARM,      // sType
        nullptr,                                                // pNext
        1,                                                      // tensorViewCount
        &amp;tensorView[0]                                          // pTensorViews - for input model tensor
    },
    {
        VK_STRUCTURE_TYPE_WRITE_DESCRIPTOR_SET_TENSOR_ARM,      // sType
        nullptr,                                                // pNext
        1,                                                      // tensorViewCount
        &amp;tensorView[1]                                          // pTensorViews - for output model tensor
    }
};

VkWriteDescriptorSet writes[] = {
    {
        VK_STRUCTURE_TYPE_WRITE_DESCRIPTOR_SET,         // sType
        &amp;tensorWrites[0],                               // pNext
        set,                                            // dstSet
        inputBinding,                                   // binding - sourced from GraphData.json
        0,                                              // dstArrayElement
        1,                                              // descriptorCount
        VK_DESCRIPTOR_TYPE_TENSOR_ARM,                  // descriptorType
        nullptr,                                        // pImageInfo
        nullptr,                                        // pBufferInfo
        nullptr                                         // pTexelBufferView
    },
    {
        VK_STRUCTURE_TYPE_WRITE_DESCRIPTOR_SET,         // sType
        &amp;tensorWrites[1],                               // pNext
        set,                                            // dstSet
        outputBinding,                                  // binding - sourced from GraphData.json
        0,                                              // dstArrayElement
        1,                                              // descriptorCount
        VK_DESCRIPTOR_TYPE_TENSOR_ARM,                  // descriptorType
        nullptr,                                        // pImageInfo
        nullptr,                                        // pBufferInfo
        nullptr                                         // pTexelBufferView
    }
};

vkUpdateDescriptorSets(device, ARRAY_SIZE(writes), writes, 0, nullptr);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_create_command_pool"><a class="anchor" href="#_create_command_pool"></a>4.10. Create command pool</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">VkPhysicalDeviceDataGraphProcessingEngineARM engine = {
    VK_PHYSICAL_DEVICE_DATA_GRAPH_PROCESSING_ENGINE_TYPE_NEURAL_QCOM,   // type
    true                                                                // isForeign
};

VkDataGraphProcessingEngineCreateInfoARM engineInfo = {
    VK_STRUCTURE_TYPE_DATA_GRAPH_PROCESSING_ENGINE_CREATE_INFO_ARM,   // sType
    nullptr,                                                          // pNext
    1,                                                                // processingEngineCount
    &amp;engine                                                           // pProcessingEngines
};

VkCommandPoolCreateInfo info = {
    VK_STRUCTURE_TYPE_COMMAND_POOL_CREATE_INFO,     // sType
    &amp;engineInfo,                                    // pNext
    0,                                              // flags
    queueFamilyIndex                                // queueFamilyIndex - Hexagon(TM) NPU queue family
};

// NOTE When binding session memory (VkBindDataGraphPipelineSessionMemoryInfoARM), make sure the VkDeviceMemory
//      is also allocated with the supported external handle type flags</code></pre>
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
    <!--
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
    -->
</footer>
<script id="site-script" src="../../../../_/js/site.js" data-ui-root-path="../../../../_"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
<script src="../../../../_/js/vendor/lunr.js" defer></script>
<script src="https://cdn.jsdelivr.net/pako/1.0.3/pako.min.js" defer></script>
<script src="../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../.." data-snippet-length="100" data-stylesheet="../../../../_/css/search.css" defer></script>
<script>
window.addEventListener('DOMContentLoaded', function(){
  try {
    var script = document.getElementById('search-ui-script');
    var siteRoot = (script && script.getAttribute('data-site-root-path')) || '';
    var manifestUrl = siteRoot + '/search-index/manifest.json';
    fetch(manifestUrl)
      .then(function (r) { return r.ok ? r.json() : Promise.reject(new Error('manifest not found')) })
      .then(function (manifest) { antoraSearch.bootstrap(lunr, manifest, siteRoot); })
      .catch(function () {
        var s = document.createElement('script');
        s.async = true;
        s.src = siteRoot + '/search-index.js';
        document.head.appendChild(s);
      });
  } catch (e) {
    // Fallback to monolithic index if anything goes wrong
    var s = document.createElement('script');
    s.async = true;
    s.src = '../../../../search-index.js';
    document.head.appendChild(s);
  }
});
</script>
  </body>
</html>
